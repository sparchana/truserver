!function(){"use strict";var e={userId:0,userJobPrefs:[],userAssessedJobPrefs:[],container:$("#assessmentDiv"),limit:3,url:"/getCandidateJobPrefWithAssessmentStatus/?limit=3",isIndicatorAvailable:!1};e.updateCandidateJobPrefs=function(){e.userJobPrefs||(e.selectedCities=[]);var t=new XMLHttpRequest;t.onreadystatechange=function(){if(t.readyState===XMLHttpRequest.DONE&&200===t.status){var s=JSON.parse(t.response);s.forEach(function(t){e.userJobPrefs.push(t)}),e.createAssessmentIndicator(s.length)}},t.open("GET",e.url),t.send()},e.createAssessmentIndicator=function(t){if(!document.querySelector("#assessmentDivRow")&&null!=t){var s=$('<div id="assessmentDivRow" class="row"></div>');e.userJobPrefs.forEach(function(e){var t,o,a=e.assessed,n=$("<div></div>");a?(t=$('<a href="#" id="tt_'+e.jobPreference.jobRole.jobRoleId+'_c" data-toggle="tooltip" data-placement="bottom" title="Completed !"></a>'),o=$('<div class="indicatorBtnGreen assessmentStatus" ><b><font color="#fff">Complete</font></b></div>')):(t=$('<a href="#" id="tt_'+e.jobPreference.jobRole.jobRoleId+'_ic" data-toggle="tooltip" data-placement="bottom" title="Click Now !!  to increase chances of getting Interview Calls !"></a>'),o=$('<div class="indicatorBtnRed assessmentStatus"><b><font color="#fff">Incomplete</font></b></div>'));var r=$('<div id="jr_'+e.jobPreference.jobRole.jobRoleId+'" class="assessmentTitle" onclick="getAssessmentQuestions('+e.jobPreference.jobRole.jobRoleId+', null)"></span></div>'),i=$('<b><font color="#fff">'+e.jobPreference.jobRole.jobName+"</font></b>");r.append(o),r.append(i),t.append(r),n.append(t),s.append(n)}),e.container.append(s),e.isIndicatorAvailable=!0}},e.saveJobPrefs=function(){var t=JSON.stringify(e.userJobPrefs);localStorage.userJobPrefs=t,console.log("localStorage: "+localStorage.userJobPrefs)},e.updateCandidateJobPrefs()}();
function createRadioButton(e,s,o,t){var n=document.createElement("label");n.style.margin="8px 8px 8px 44px",n.style.display="block",n["class"]="col-md-4",n.style.fontWeight="normal";var a=document.createElement("input");return a.type="radio",a.style="margin-left: -20px; margin-right: 7px;",a.name=e,a.value=s,a.id=t,a.onclick=function(){var e=this.id.split("_")[2];totalLeftAttempts>0&&prevId!=e&&(--totalLeftAttempts,prevId=e),0==totalLeftAttempts&&$(".btn-success.btn-modal-submit").prop("disabled",!1)},n.appendChild(a),n.appendChild(document.createTextNode(o)),null==s?null:n}function processAssessmentQuestions(e){if(null!=e){if("OK"==e||"NA"==e)return processPostAssessmentResponse(e),e;if($(".assessment-modal").size()>0)return e;var s,o=$('<div id="assessment_body"></div>'),t=null,n=0;e.forEach(function(e){if(null!=e){n++,null!=t&&t==e.jobRole.jobRoleId||(s=$('<div id="job_role_container_'+e.jobRole.jobRoleId+'" class=""><h4 class="asssessmentTitle" >Assessment for '+e.jobRole.jobName+"</h4></div>"),n=1);var a=$("<div id=QuestionID_"+e.jobRole.jobRoleId+"_"+e.assessmentQuestionId+' class= "question_contianer" style="font-weight: bold;"></div>').text("Q"+n+". "+e.questionText),l=$("<div id=OptionContainerID_"+e.jobRole.jobRoleId+"_"+e.assessmentQuestionId+' class= "row optionContainer"></div>');if(null!=e.assessmentQuestionType&&1==e.assessmentQuestionType.assessmentQuestionTypeId){var i;i=createRadioButton("RN_"+e.jobRole.jobRoleId+"_"+e.assessmentQuestionId,e.optionA,e.optionA,"OID_"+e.jobRole.jobRoleId+"_"+e.assessmentQuestionId+"_1"),null!=i&&l.append(i),i=createRadioButton("RN_"+e.jobRole.jobRoleId+"_"+e.assessmentQuestionId,e.optionB,e.optionB,"OID_"+e.jobRole.jobRoleId+"_"+e.assessmentQuestionId+"_2"),null!=i&&l.append(i),i=createRadioButton("RN_"+e.jobRole.jobRoleId+"_"+e.assessmentQuestionId,e.optionC,e.optionC,"OID_"+e.jobRole.jobRoleId+"_"+e.assessmentQuestionId+"_3"),null!=i&&l.append(i),i=createRadioButton("RN_"+e.jobRole.jobRoleId+"_"+e.assessmentQuestionId,e.optionD,e.optionD,"OID_"+e.jobRole.jobRoleId+"_"+e.assessmentQuestionId+"_4"),null!=i&&l.append(i),i=createRadioButton("RN_"+e.jobRole.jobRoleId+"_"+e.assessmentQuestionId,e.optionE,e.optionE,"OID_"+e.jobRole.jobRoleId+"_"+e.assessmentQuestionId+"_5"),null!=i&&l.append(i),null!=l&&a.append(l)}s.append(a),null!=t&&t==e.jobRole.jobRoleId||(o.append(s),t=e.jobRole.jobRoleId)}}),totalLeftAttempts=n,bootbox.dialog({className:"assessment-modal",title:"<h3 class='assessment-modal-title' style='color: #286ab6'>Job Application Assessment</h3><h5>Complete Assessment to Improve Chance of getting an Interview Call</h5>",message:o,closeButton:!0,animate:!0,onEscape:function(){$("body").removeClass("open-modal")},buttons:{Submit:{className:"btn-success btn-modal-submit",callback:function(){$("body").removeClass("open-modal"),$("#assessment_body input[type='radio']:checked").size()>0&&triggerFinalSubmission()}}},callback:function(e){console.log(e)}}),$(".btn-success.btn-modal-submit").prop("disabled",!0),$("body").removeClass("modal-open").removeClass("open-modal").addClass("open-modal")}}function processPostAssessmentResponse(e){return $("#customMsgIcon").attr("src","/assets/common/img/jobApplied.png"),$("#messagePromptModal").hasClass("in")?$("#customMsg").append(" & You have successfully completed assessment for this job."):$("#customMsg").html(" You have completed assessment for this job."),"ALL_ASSESSED"==e.status?(localStorage.setItem("assessed","1"),$(".assessmentStatus").removeClass("indicatorBtnRed").addClass("indicatorBtnGreen"),$(".assessmentStatus b font").text("Complete"),$("#assessmentDivRow a").attr("title","Completed !"),$("#messagePromptModal").modal("show"),null!=$("#ajp_"+e.jobRoleId)&&$("#ajp_"+e.jobRoleId).hide("slow",function(){$("#ajp_"+e.jobRoleId).remove()})):"OK"!=e&&"SUCCESS"!=e.status&&"ALREADY_ASSESSED"!=e.status||($("#jr_"+e.jobRoleId+" .assessmentStatus").removeClass("indicatorBtnRed").addClass("indicatorBtnGreen"),$("#jr_"+e.jobRoleId+" .assessmentStatus b font").text("Complete"),$("#tt_"+e.jobRoleId+"_ic").attr("title","Completed !"),$("#messagePromptModal").modal("show"),null!=$("#ajp_"+e.jobRoleId)&&$("#ajp_"+e.jobRoleId).hide("slow",function(){$("#ajp_"+e.jobRoleId).remove()})),e}function triggerFinalSubmission(){for(var e=$("#assessment_body input[type='radio']:checked"),s=[],o=e.size(),t=0;t<o;t++){var n=e[t],a=n.id.split("_"),l={};l.jobRoleId=a[1],l.assessmentQuestionId=a[2],l.assessmentResponse=n.value,s.push(l)}var i={responseList:s};try{$.ajax({type:"POST",url:"/submitAssessment",contentType:"application/json; charset=utf-8",data:JSON.stringify(i),success:processPostAssessmentResponse})}catch(d){console.log("exception occured!!"+d)}}function getAssessmentQuestions(e,s){var o="/getAssessmentQuestions/";null==o&&null==jobPostId||(o+="?",null!=e&&(o+="jobRoleIds="+e),null!=s&&(o+="&jobPostIds="+s));try{$.ajax({type:"GET",url:o,data:!1,async:!1,contentType:!1,processData:!1,success:processAssessmentQuestions})}catch(t){console.log("exception occured!!"+t.stack)}}var totalLeftAttempts=0,prevId=0;
!function(t,o){"use strict";"function"==typeof define&&define.amd?define(["jquery"],o):"object"==typeof exports?module.exports=o(require("jquery")):t.bootbox=o(t.jQuery)}(this,function t(o,e){"use strict";function a(t){var o=C[f.locale];return o?o[t]:C.en[t]}function n(t,e,a){t.stopPropagation(),t.preventDefault();var n=o.isFunction(a)&&a.call(e,t)===!1;n||e.modal("hide")}function r(t){var o,e=0;for(o in t)e++;return e}function l(t,e){var a=0;o.each(t,function(t,o){e(t,o,a++)})}function i(t){var e,a;if("object"!=typeof t)throw new Error("Please supply an object of options");if(!t.message)throw new Error("Please specify a message");return t=o.extend({},f,t),t.buttons||(t.buttons={}),e=t.buttons,a=r(e),l(e,function(t,n,r){if(o.isFunction(n)&&(n=e[t]={callback:n}),"object"!==o.type(n))throw new Error("button with key "+t+" must be an object");n.label||(n.label=t),n.className||(n.className=2>=a&&r===a-1?"btn-primary":"btn-default")}),t}function c(t,o){var e=t.length,a={};if(1>e||e>2)throw new Error("Invalid argument length");return 2===e||"string"==typeof t[0]?(a[o[0]]=t[0],a[o[1]]=t[1]):a=t[0],a}function s(t,e,a){return o.extend(!0,{},t,c(e,a))}function u(t,o,e,a){var n={className:"bootbox-"+t,buttons:p.apply(null,o)};return b(s(n,a,e),o)}function p(){for(var t={},o=0,e=arguments.length;e>o;o++){var n=arguments[o],r=n.toLowerCase(),l=n.toUpperCase();t[r]={label:a(l)}}return t}function b(t,o){var a={};return l(o,function(t,o){a[o]=!0}),l(t.buttons,function(t){if(a[t]===e)throw new Error("button key "+t+" is not allowed (options are "+o.join("\n")+")")}),t}var d={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close' data-dismiss='modal' aria-hidden='true'>&times;</button>",form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"}},f={locale:"en",backdrop:"static",animate:!0,className:null,closeButton:!0,show:!0,container:"body"},m={};m.alert=function(){var t;if(t=u("alert",["ok"],["message","callback"],arguments),t.callback&&!o.isFunction(t.callback))throw new Error("alert requires callback property to be a function when provided");return t.buttons.ok.callback=t.onEscape=function(){return!o.isFunction(t.callback)||t.callback.call(this)},m.dialog(t)},m.confirm=function(){var t;if(t=u("confirm",["cancel","confirm"],["message","callback"],arguments),t.buttons.cancel.callback=t.onEscape=function(){return t.callback.call(this,!1)},t.buttons.confirm.callback=function(){return t.callback.call(this,!0)},!o.isFunction(t.callback))throw new Error("confirm requires a callback");return m.dialog(t)},m.prompt=function(){var t,a,n,r,i,c,u;if(r=o(d.form),a={className:"bootbox-prompt",buttons:p("cancel","confirm"),value:"",inputType:"text"},t=b(s(a,arguments,["title","callback"]),["cancel","confirm"]),c=t.show===e||t.show,t.message=r,t.buttons.cancel.callback=t.onEscape=function(){return t.callback.call(this,null)},t.buttons.confirm.callback=function(){var e;switch(t.inputType){case"text":case"textarea":case"email":case"select":case"date":case"time":case"number":case"password":e=i.val();break;case"checkbox":var a=i.find("input:checked");e=[],l(a,function(t,a){e.push(o(a).val())})}return t.callback.call(this,e)},t.show=!1,!t.title)throw new Error("prompt requires a title");if(!o.isFunction(t.callback))throw new Error("prompt requires a callback");if(!d.inputs[t.inputType])throw new Error("invalid prompt type");switch(i=o(d.inputs[t.inputType]),t.inputType){case"text":case"textarea":case"email":case"date":case"time":case"number":case"password":i.val(t.value);break;case"select":var f={};if(u=t.inputOptions||[],!o.isArray(u))throw new Error("Please pass an array of input options");if(!u.length)throw new Error("prompt with select requires options");l(u,function(t,a){var n=i;if(a.value===e||a.text===e)throw new Error("given options in wrong format");a.group&&(f[a.group]||(f[a.group]=o("<optgroup/>").attr("label",a.group)),n=f[a.group]),n.append("<option value='"+a.value+"'>"+a.text+"</option>")}),l(f,function(t,o){i.append(o)}),i.val(t.value);break;case"checkbox":var C=o.isArray(t.value)?t.value:[t.value];if(u=t.inputOptions||[],!u.length)throw new Error("prompt with checkbox requires options");if(!u[0].value||!u[0].text)throw new Error("given options in wrong format");i=o("<div/>"),l(u,function(e,a){var n=o(d.inputs[t.inputType]);n.find("input").attr("value",a.value),n.find("label").append(a.text),l(C,function(t,o){o===a.value&&n.find("input").prop("checked",!0)}),i.append(n)})}return t.placeholder&&i.attr("placeholder",t.placeholder),t.pattern&&i.attr("pattern",t.pattern),t.maxlength&&i.attr("maxlength",t.maxlength),r.append(i),r.on("submit",function(t){t.preventDefault(),t.stopPropagation(),n.find(".btn-primary").click()}),n=m.dialog(t),n.off("shown.bs.modal"),n.on("shown.bs.modal",function(){i.focus()}),c===!0&&n.modal("show"),n},m.dialog=function(t){t=i(t);var a=o(d.dialog),r=a.find(".modal-dialog"),c=a.find(".modal-body"),s=t.buttons,u="",p={onEscape:t.onEscape};if(o.fn.modal===e)throw new Error("$.fn.modal is not defined; please double check you have included the Bootstrap JavaScript library. See http://getbootstrap.com/javascript/ for more details.");if(l(s,function(t,o){u+="<button data-bb-handler='"+t+"' type='button' class='btn "+o.className+"'>"+o.label+"</button>",p[t]=o.callback}),c.find(".bootbox-body").html(t.message),t.animate===!0&&a.addClass("fade"),t.className&&a.addClass(t.className),"large"===t.size?r.addClass("modal-lg"):"small"===t.size&&r.addClass("modal-sm"),t.title&&c.before(d.header),t.closeButton){var b=o(d.closeButton);t.title?a.find(".modal-header").prepend(b):b.css("margin-top","-10px").prependTo(c)}return t.title&&a.find(".modal-title").html(t.title),u.length&&(c.after(d.footer),a.find(".modal-footer").html(u)),a.on("hidden.bs.modal",function(t){t.target===this&&a.remove()}),a.on("shown.bs.modal",function(){a.find(".btn-primary:first").focus()}),"static"!==t.backdrop&&a.on("click.dismiss.bs.modal",function(t){a.children(".modal-backdrop").length&&(t.currentTarget=a.children(".modal-backdrop").get(0)),t.target===t.currentTarget&&a.trigger("escape.close.bb")}),a.on("escape.close.bb",function(t){p.onEscape&&n(t,a,p.onEscape)}),a.on("click",".modal-footer button",function(t){var e=o(this).data("bb-handler");n(t,a,p[e])}),a.on("click",".bootbox-close-button",function(t){n(t,a,p.onEscape)}),a.on("keyup",function(t){27===t.which&&a.trigger("escape.close.bb")}),o(t.container).append(a),a.modal({backdrop:!!t.backdrop&&"static",keyboard:!1,show:!1}),t.show&&a.modal("show"),a},m.setDefaults=function(){var t={};2===arguments.length?t[arguments[0]]=arguments[1]:t=arguments[0],o.extend(f,t)},m.hideAll=function(){return o(".bootbox").modal("hide"),m};var C={bg_BG:{OK:"Ок",CANCEL:"Отказ",CONFIRM:"Потвърждавам"},br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},cs:{OK:"OK",CANCEL:"Zrušit",CONFIRM:"Potvrdit"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},el:{OK:"Εντάξει",CANCEL:"Ακύρωση",CONFIRM:"Επιβεβαίωση"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},et:{OK:"OK",CANCEL:"Katkesta",CONFIRM:"OK"},fa:{OK:"قبول",CANCEL:"لغو",CONFIRM:"تایید"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},he:{OK:"אישור",CANCEL:"ביטול",CONFIRM:"אישור"},hu:{OK:"OK",CANCEL:"Mégsem",CONFIRM:"Megerősít"},hr:{OK:"OK",CANCEL:"Odustani",CONFIRM:"Potvrdi"},id:{OK:"OK",CANCEL:"Batal",CONFIRM:"OK"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},ja:{OK:"OK",CANCEL:"キャンセル",CONFIRM:"確認"},lt:{OK:"Gerai",CANCEL:"Atšaukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"Apstiprināt"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierdź"},pt:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Confirmar"},ru:{OK:"OK",CANCEL:"Отмена",CONFIRM:"Применить"},sq:{OK:"OK",CANCEL:"Anulo",CONFIRM:"Prano"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},th:{OK:"ตกลง",CANCEL:"ยกเลิก",CONFIRM:"ยืนยัน"},tr:{OK:"Tamam",CANCEL:"İptal",CONFIRM:"Onayla"},zh_CN:{OK:"OK",CANCEL:"取消",CONFIRM:"确认"},zh_TW:{OK:"OK",CANCEL:"取消",CONFIRM:"確認"}};return m.addLocale=function(t,e){return o.each(["OK","CANCEL","CONFIRM"],function(t,o){if(!e[o])throw new Error("Please supply a translation for '"+o+"'")}),C[t]={OK:e.OK,CANCEL:e.CANCEL,CONFIRM:e.CONFIRM},m},m.removeLocale=function(t){return delete C[t],m},m.setLocale=function(t){return m.setDefaults("locale",t)},m.init=function(e){return t(e||o)},m});
function processJobPostInterviewSlot(e,t){if(null==e.interviewDetailsList||0==e.interviewDetailsList.length)return $("body").removeClass("open-interview-selector-modal"),void bootbox.hideAll();jpTitle=e.jobPostTitle,compName=e.company.companyName,$("#jobTitle").html(e.jobPostTitle),$("#compName").html(e.company.companyName);var i;if(Object.keys(e.interviewDetailsList).length>0){$("#interViewSlot").html("");var n=$('<option value="-1"></option>').text("Select Time Slot");$("#interViewSlot").append(n);var o=e.interviewDetailsList;if(null!=o[0].interviewDays){var a=o[0].interviewDays.toString(2);if(7!=a.length){s=7-a.length;var r="";for(i=0;i<s;i++)r+="0";r+=a,a=r}}var l=new Date;for(i=t?1:2;i<9;i++){var s=new Date(l.getFullYear(),l.getMonth(),l.getDate()+i);checkSlotAvailability(s,a)&&o.forEach(function(e){var t=s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate()+"_"+e.interviewTimeSlot.interviewTimeSlotId,i=$('<option value="'+t+'"></option>').text(getDayVal(s.getDay())+", "+s.getDate()+" "+getMonthVal(s.getMonth()+1)+" ("+e.interviewTimeSlot.interviewTimeSlotName+")");$("#interViewSlot").append(i)})}$("#interViewSection").show()}else $("#interViewSection").hide()}function getDayVal(e){switch(e){case 0:return"Sun";case 1:return"Mon";case 2:return"Tue";case 3:return"Wed";case 4:return"Thu";case 5:return"Fri";case 6:return"Sat"}}function getMonthVal(e){switch(e){case 1:return"Jan";case 2:return"Feb";case 3:return"Mar";case 4:return"Apr";case 5:return"May";case 6:return"Jun";case 7:return"Jul";case 8:return"Aug";case 9:return"Sep";case 10:return"Oct";case 11:return"Nov";case 12:return"Dec"}}function checkSlotAvailability(e,t){return 1==e.getDay()&&"1"==t.charAt(0)||(2==e.getDay()&&"1"==t.charAt(1)||(3==e.getDay()&&"1"==t.charAt(2)||(4==e.getDay()&&"1"==t.charAt(3)||(5==e.getDay()&&"1"==t.charAt(4)||(6==e.getDay()&&"1"==t.charAt(5)||(0==e.getDay()&&"1"==t.charAt(6)||void 0))))))}function initInterviewModal(e,t,i){var n='<div id="confirmationMsg"><center><img src="/assets/common/img/jobApply.png" width="48px"></center><center><h6> For <b><div style="display: inline-block" id="jobTitle"></div></b> job at <b><div style="display: inline-block" id="compName"></div></b>.</h6><h6 style="margin-top: 16px">Please select the interview date and time</h6><div class="materialDash"></div><div class="interview_container" style="margin-top: 16px"><div class="row" style="margin-top: 4px;text-align: center" id="interViewSection"><div class="col-md-12"><center><select id="interViewSlot" class="selectDropdown" style="width: 210px;padding:1%;margin-top: 8px"></select></center></div></div></div></center></div>',o="Last step! Select your interview time slot";generateInterviewSlotModal(o,n,e,t);try{$.ajax({type:"POST",url:"/getJobPostInfo/"+t+"/0",data:!1,contentType:!1,processData:!1,success:function(e){processJobPostInterviewSlot(e,i)}})}catch(a){console.log("exception occured!!"+a)}}function generateInterviewSlotModal(e,t,i,n){var o=bootbox.dialog({className:"interview-slot-selector-modal",title:e,message:t,closeButton:!0,animate:!0,onEscape:function(){$("body").removeClass("open-interview-selector-modal"),nfy("Submitted successfully. Refreshing page.","success"),setTimeout(function(){location.reload()},2e3)},buttons:{Submit:{id:"interviewModalBtn",className:"mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent interview-selector-submit",callback:function(){finalInterviewSlotSubmission(i,n)}}}});o.attr("id","interview-selector-modal"),$("#interViewSlot").change(function(){$("#interViewSlot").val()!=-1?$(".btn.interview-selector-submit").prop("disabled",!1):$(".btn.interview-selector-submit").prop("disabled",!0)}),$("#interview-slot-selector-modal div.modal-body").attr("style","overflow: visible !important"),$(".btn.interview-selector-submit").prop("disabled",!0),$("body").removeClass("modal-open").removeClass("open-interview-selector-modal").addClass("open-interview-selector-modal")}function finalInterviewSlotSubmission(e,t){if($("#interViewSlot").val()!=-1){var i=$("#interViewSlot").val().split("_");scheduledInterviewDate=i[0],prefTimeSlot=i[1];var n={timeSlot:prefTimeSlot,scheduledInterviewDate:scheduledInterviewDate},o="/support/api/updateCandidateInterviewDetail/";if(null==o||null==t)return;o+="?",null!=t&&(o+="jobPostId="+t),null!=e&&(o+="&candidateId="+e),$.ajax({type:"POST",url:o,async:!1,contentType:"application/json; charset=utf-8",data:JSON.stringify(n),success:processInterviewSubmissionResponse})}}function processInterviewSubmissionResponse(e){"OK"==e?(nfy("Interview Submitted successfully. Refreshing ..","success"),setTimeout(function(){location.reload()},2e3)):(nfy("Something went wrong. Refreshing page. After refresh please try again.","error"),setTimeout(function(){location.reload()},2e3))}function nfy(e,t){$.notify(e,t)}var jpTitle,compName;
function initDecorator(e){return null==e&&(e=globalPalette),decorator={preScreen:{title:"",className:"mdl-grid"},container:{className:"row mdl-cell mdl-cell--12-col"},bootBoxMain:{className:"pre-screen-modal"},table:{mainTable:{title:"Min Requirement",titleStyle:"margin:0;color:rgb(63, 81, 181);padding: 2%;background-color: rgba(255, 255, 255, 0.99);",className:"mdl-data-table mdl-js-data-table mdl-shadow--2dp mdl-cell mdl-cell--12-col",style:"margin:0;border:none",tHead:{style:"background-color:"+e.color.main.headerColor,titleText_1:"",titleText_2:"Job Post Info",titleText_3:"Candidate Info",titleText_4:"Match?",titleText_5:"Is candidate Ready",titleText_6:"Edit"},tBody:{style:""}},otherTable:{title:"Other Requirement",titleStyle:"margin: 30px 0 0 0;color:rgb(63, 81, 181);padding: 2%;background-color: rgba(255, 255, 255, 0.99);",className:"mdl-data-table mdl-js-data-table mdl-shadow--2dp mdl-cell mdl-cell--12-col",style:"margin:0;border:none",tHead:{style:"background-color:"+e.color.main.headerColor,titleText_1:"",titleText_2:"Job Post Info",titleText_3:"Candidate Info",titleText_4:"Match?",titleText_5:"Is candidate Ready",titleText_6:"Edit"},tBody:{style:""}},idProofCheckbox:{checkboxLabel:{className:"mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect",style:"text-align:center"},checkboxMatch:{className:"mdl-checkbox__input"}},glyphIconCorrectClass:"glyphicon glyphicon-ok",glyphIconWrongClass:"glyphicon glyphicon-remove",rowHeading:{post:{title:"Job Post Min Req",isRequired:!0,style:"padding:1% 2%;background-color:"+e.color.main.headerColor+";color:#fff"},note:{title:"Note",isRequired:!0,style:"padding:1% 2%;background-color:"+e.color.main.headerColor+";color:#fff"}}},callYesNo:{button:{className:"mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect"},visibility:!0},finalSubmissionButton:{className:"mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent modal-submit",init:{disabled:!0}},textContainers:{visibility:!0,minReqContainer:{title:"",visibility:!0,className:"col-lg-6 form-group remove-padding-left"},noteContainer:{title:"",visibility:!0,className:"col-lg-6 form-group remove-padding-right"}},edit:{title:"Edit"},finalSubmissionBypassRequired:!1,callYesNoRequired:!0,columnVisible:[1,2,3,4,5,6],modalFooter:{footerMessage:"Did the candidate pass pre-screen?"}}}function processTimeShift(e){if(null!=e){var t=[];e.forEach(function(e){var a={label:e.timeShiftName,value:parseInt(e.timeShiftId)};t.push(a)});var a=$("#candidateTimeShiftPref");a.multiselect({nonSelectedText:"None Selected",includeSelectAllOption:!0,maxHeight:300}),a.multiselect("dataprovider",t),a.multiselect("rebuild")}}function processEducation(e){if(null!=e){var t=[];e.forEach(function(e){var a={label:e.educationName,value:parseInt(e.educationId)};t.push(a)});var a=$("#candidateHighestEducation");a.multiselect({nonSelectedText:"None Selected",includeSelectAllOption:!0,maxHeight:300}),a.multiselect("dataprovider",t),a.multiselect("rebuild")}}function processDegree(e){if(null!=e){var t=[];e.forEach(function(e){var a={label:e.degreeName,value:parseInt(e.degreeId)};t.push(a)});var a=$("#candidateHighestDegree");a.multiselect({nonSelectedText:"None Selected",includeSelectAllOption:!0,maxHeight:300}),a.multiselect("dataprovider",t),a.multiselect("rebuild")}}function processLanguage(e){var t=[],a=[];$('<option value="-1"></option>').text("Select");langArray=[],e.forEach(function(e){var l=e.languageId,n=e.languageName,i={};i.id=l,i.name=n,t.push(n),a.push(l);$("<option value="+l+"></option>").text(n);langArray.push(i)}),populateLanguages(t.reverse(),a.reverse())}function populateLanguages(e,t){var a,l=document.getElementById("langTable");for(a=0;a<e.length;a++)if(1==t[a]||2==t[a]||3==t[a]||4==t[a]||5==t[a]){var n=l.insertRow(0),i=n.insertCell(0);i.style="padding-top:16px;font-weight:bold";var o=n.insertCell(1),d=n.insertCell(2),r=n.insertCell(3),c=n.insertCell(4);i.innerHTML='<span style="margin-top:8px">'+e[a]+"</span>",o.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;",d.innerHTML='<div class="btn-group" data-toggle="buttons"><label class="btn btn-custom-check" style="width: 110px"><input id='+t[a]+' type="checkbox" name="u" value=0 >Understand</label></div>',r.innerHTML='<div class="btn-group" data-toggle="buttons"><label class="btn btn-custom-check" style="width: 110px"><input id='+t[a]+' type="checkbox" name="s" value=0 >Speak</label></div>',c.innerHTML='<div class="btn-group" data-toggle="buttons"><label class="btn btn-custom-check" style="width: 110px"><input id='+t[a]+' type="checkbox" name="rw" value=0 >Read/Write</label></div>'}}function prefillLanguageTable(e){$("table#langTable tr").each(function(){$(this).find("input").each(function(){var t=document.createElement("INPUT");t=$(this).get(0),e.forEach(function(e){t.id==e.language.languageId&&("1"==e.verbalAbility&&"s"==t.name?(t.checked=!0,$(t).parent().addClass("active").siblings().removeClass("active")):"1"==e.readWrite&&"rw"==t.name?(t.checked=!0,$(t).parent().addClass("active").siblings().removeClass("active")):"1"==e.understanding&&"u"==t.name&&(t.checked=!0,$(t).parent().addClass("active").siblings().removeClass("active")))})})})}function processExperience(e){var t=[];e.forEach(function(e){var a={label:e.experienceType,value:parseInt(e.experienceId)};t.push(a)});var a=$("#experienceMultiSelect");a.multiselect({nonSelectedText:"None Selected",includeSelectAllOption:!0,maxHeight:300}),a.multiselect("dataprovider",t),a.multiselect("rebuild")}function processDataGetAssets(e){var t=[];e.forEach(function(e){var a={label:e.assetTitle,value:parseInt(e.assetId)};t.push(a)});var a=$("#assetMultiSelect");a.multiselect({includeSelectAllOption:!0,enableCaseInsensitiveFiltering:!0,maxHeight:300}),a.multiselect("dataprovider",t),a.multiselect("rebuild")}function processIdProofsWithNumbers(e,t){if(null!=e){var a=$("#document_details"),l=document.createElement("table");l.className=t.table.mainTable.className,l.style=t.table.mainTable.style,l.id="documentTable";var n=document.createElement("thead");n.style=t.table.mainTable.tHead.style,l.appendChild(n);var i=document.createElement("tr");n.appendChild(i);var o=document.createElement("th");o.style="color:#ffffff",i.appendChild(o);var d=document.createElement("th");d.textContent="Document Title",d.style="color:#ffffff",i.appendChild(d);var r=document.createElement("th");r.style="color:#ffffff",r.textContent="Document Number",i.appendChild(r);var c=document.createElement("tbody");l.appendChild(c),a.append(l),e.forEach(function(e){var a=document.createElement("tr");a.id=e.idProofId,c.appendChild(a);var l=document.createElement("td");l.id="idProofCheckbox",a.appendChild(l);var n=document.createElement("label");n.type="checkbox",n["for"]="checkboxLabel_"+e.idProofId,n.style="text-align:center",n.className=t.table.idProofCheckbox.checkboxLabel.className,l.appendChild(n);var i=document.createElement("input");i.type="checkbox",i.id="idProofCheckbox_"+e.idProofId,i.onclick=function(){$("#idProofValue_"+e.idProofId).val("")},i.className="mdl-checkbox__input",n.appendChild(i);var o=document.createElement("td");o.textContent=e.idProofName,o.id="idProofName_"+e.idProofId,a.appendChild(o);var d=document.createElement("td");d.id="idProofValueTd",a.appendChild(d);var r=document.createElement("INPUT");r.setAttribute("type","text"),r.setAttribute("id","idProofValue_"+e.idProofId),r.onchange=validateInput,d.appendChild(r)})}}function validateInput(){console.log(this.id);var e=this.id.split("_")[1];3==e&&(console.log(this.value),validateAadhar(this.value)?$(".btn.edit-modal-submit").prop("disabled",!1):($(".btn.edit-modal-submit").prop("disabled",!0),notifyModal("Invalid Input","Invalid Aadhaar Card Number. (Example: 100120023003)")),$("#idProofCheckbox_"+e).prop("checked",!0)),1==e&&(console.log(this.value),validateDL(this.value)?$(".btn.edit-modal-submit").prop("disabled",!1):($(".btn.edit-modal-submit").prop("disabled",!0),notifyModal("Invalid Input","Invalid Driving Licence Number. (Example: TN7520130008800 or TN-7520130008800)")),$("#idProofCheckbox_"+e).prop("checked",!0)),2==e&&(console.log(this.value),validatePASSPORT(this.value)?$(".btn.edit-modal-submit").prop("disabled",!1):($(".btn.edit-modal-submit").prop("disabled",!0),notifyModal("Invalid Input","Invalid Pass Port Number. (Example: A12 34567)")),$("#idProofCheckbox_"+e).prop("checked",!0)),4==e&&(console.log(this.value),validatePAN(this.value)?$(".btn.edit-modal-submit").prop("disabled",!1):($(".btn.edit-modal-submit").prop("disabled",!0),notifyModal("Invalid Input","Invalid PAN Card Number. (Example: ABCDE1234Z)")),$("#idProofCheckbox_"+e).prop("checked",!0)),console.log(this.parentNode)}function processLocality(e){console.log("fetched all locality. now rendering locality token input"),localityArray=[],null!=e&&(e.forEach(function(e){var t=e.localityId,a=e.localityName,l={};l.id=t,l.name=a,localityArray.push(l)}),null!=localityArray&&$("#candidateHomeLocality").tokenInput(getLocalityArray(),{theme:"facebook",placeholder:"job Localities?",hintText:"Start typing Area (eg. BTM Layout, Bellandur..)",minChars:0,tokenLimit:1,zindex:9999,preventDuplicates:!0}))}function getLocalityArray(){return localityArray}function updateCallAttempts(e,t,a){if(null==e||null==t)return void console.log("invalid candidateId and jobPostId");NProgress.start();var l="/support/api/updatePreScreenAttempt/";$.ajax({type:"GET",url:l+"?candidateId="+e+"&jobPostId="+t+"&callStatus="+a,processData:!1,success:function(e){"OK"==e&&bootbox.hideAll()}}),NProgress.done()}function saveAttempt(e,t){var a=$("#callResponse").val();updateCallAttempts(e,t,a),bootbox.hideAll()}function onCallYes(e,t){console.log("connected: "+e+" "+t),$("#callNoClass").hide(),$("#pre_screen_body").show(),updateCallAttempts(e,t,"CONNECTED"),activateSubmit(!0)}function activateSubmit(e){e?null!=$('input:radio[name="verdict"]:checked').val()&&"yes"==$('input:radio[name="callConnected"]:checked').val()&&$(".btn.modal-submit").prop("disabled",!1):null!=$('input:radio[name="verdict"]:checked').val()&&$(".btn.modal-submit").prop("disabled",!1)}function onCallNo(e,t){$("#callNoClass").show(),$("#pre_screen_body").hide(),$(".btn.modal-submit").prop("disabled",!0)}function triggerPreScreenResponseSubmission(e,t,a){for(var l=$("#pre_screen_body input[type='checkbox']:checked"),n=[],i=l.size(),o=0;o<i;o++){var d=l[o],r=d.id.split("_"),c=r[1].split("-"),s=c.length;if(c.length>1)for(var p=0;p<s;p++)n.push(parseInt(c[p]));else n.push(parseInt(r[1]))}var u=!1;if(null!=$('input:radio[name="verdict"]:checked').val()&&(u=!0),u){var m={candidateId:e,jobPostId:t,preScreenIdList:n,pass:1==$('input:radio[name="verdict"]:checked').val(),preScreenNote:$("#pre_screen_note").val()};try{$.ajax({type:"POST",url:"/submitPreScreen",contentType:"application/json; charset=utf-8",data:JSON.stringify(m),success:function(l){processPostPreScreenResponse(l,e,t,a)}})}catch(b){console.log("exception occured!!"+b)}}}function saveEditedResponses(e,t,a,l){var n,i=1,o=!0;if(0==t){var d=[];$("#documentTable tr").each(function(){var e,t={};void 0!=$(this).attr("id")&&(e=$(this).attr("id").split("_").slice(-1).pop(),$("input#idProofCheckbox_"+e).is(":checked")&&(t.idProofId=parseInt(e),t.idNumber=$("input#idProofValue_"+e).val().trim()),jQuery.isEmptyObject(t)||d.push(t))}),n={idProofWithIdNumberList:d}}else if(1==t){var r,c=[];$("#langTable input:checked").map(function(){r=0;var e,t=this.id,a=this.name,l={};for(var n in c)if(c[n].id==t){e=n,r=1;break}0==r?(l.id=t,l.u=0,l.rw=0,l.s=0,"u"==a?l.u=1:"rw"==a?l.rw=1:l.s=1,c.push(l)):"u"==a?c[e].u=1:"rw"==a?c[e].rw=1:c[e].s=1}).get();n={candidateKnownLanguageList:c}}else if(2==t){var s=$("#assetMultiSelect").val();n={assetIdList:s}}else if(3==t){var p=$("#candidateDob").val(),u=String(p),m=new Date(u),b=new Date,f=new Date(b.setFullYear(b.getFullYear()-18)),h=new Date(b.setFullYear(b.getFullYear()-70));m>=f&&(i=0),h<=m&&(i=0),n={candidateDob:u}}else if(4==t){var v=parseInt($("#candidateTotalExperienceMonth").val()),g=parseInt($("#candidateTotalExperienceYear").val()),y=v+12*g;n={candidateTotalExperience:y,pastCompanyList:[],candidateIsEmployed:null,extraDetailAvailable:!1}}else if(5==t)n={candidateEducationLevel:$("#candidateHighestEducation").val(),candidateDegree:$("#candidateHighestDegree").val(),candidateEducationInstitute:$("#candidateEducationInstitute").val(),candidateEducationCompletionStatus:parseInt($('input:radio[name="candidateEducationCompletionStatus"]:checked').val())};else if(6==t)n={candidateGender:$('input:radio[name="gender"]:checked').val()};else if(7==t){var x=$("#candidateLastWithdrawnSalary").val();!isNaN(x)&&parseInt(x)>=1e3&&parseInt(x)<=1e5?n={candidateLastWithdrawnSalary:parseInt($("#candidateLastWithdrawnSalary").val())}:(notifyModal("Invalid Salary Input","Please enter a valid 'Last Withdrawn Salary' per month. (Min: 1000, Max: 1,00,000)"),o=!1)}else 8==t?n={candidateHomeLocality:parseInt($("#candidateHomeLocality").val())}:9==t&&(n={candidateTimeShiftPref:$("#candidateTimeShiftPref").val()});if(0==i?(notifyModal("Invalid DOB","Please enter valid date of birth"),o=!1):$("#candidateTotalExperienceYear").val()>40&&(notifyModal("Invalid Years of Experience","Please enter valid years of experience. (Min: 0, Max: 40)"),o=!1),o){try{$.ajax({type:"POST",url:"/support/api/updateCandidateDetailsAtPreScreen/?propertyId="+t+"&candidateId="+e,contentType:"application/json; charset=utf-8",data:JSON.stringify(n),success:function(n){processFinalSubmitResponse(n,a,e,t,l)}})}catch(C){console.log("exception occured!!"+C)}return!0}return!1}function notifyModal(e,t){bootbox.alert({size:"small",title:e,message:t,callback:function(){}})}function processFinalSubmitResponse(e,t,a,l,n){console.log(e),"error"==e&&""==e.trim()||getPreScreenContent(t,a,!0,null,null,n)}function generateEditModalView(e,t,a,l,n,i,o){console.log("rendering modal");var d=bootbox.dialog({className:"pre-screen-modal",title:e,message:t,closeButton:!0,animate:!0,onEscape:function(){$("body").removeClass("open-edit-modal")},buttons:{Save:{className:"mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent edit-modal-submit",callback:function(){return saveEditedResponses(a,l,i,o)}}}});d.attr("id","edit-modal"),n&&$("#edit-modal div.modal-body").attr("style","overflow: visible !important"),$("body").removeClass("modal-open").removeClass("open-edit-modal").addClass("open-edit-modal")}function fetchEditModalContent(e,t,a,l,n){var i="/support/api/getCandidateDetails/";if(null==i||null==e)return void console.log("please provide candidateId && propertyId");i+="?",null!=e&&(i+="candidateId="+e),null!=a&&(i+="&propertyId="+t);var o,d,r="POST",c=function(e){console.log("candidate's info:"+JSON.stringify(e))},s="test",p="test",u=!1;if(0==t?(s='<div id="document_details"><h4 class="mdl-shadow--2dp" style=";margin: 0;color:rgb(63, 81, 181);padding: 2%;background-color: rgba(255, 255, 255, 0.99);">Document Details:</h4></div>',p="Candidate Document Edit",o="/support/api/getDocumentReqForJobRole/?job_post_id="+a,r="GET",d=function(e){processIdProofsWithNumbers(e,l)},c=function(e){null!=e&&e.forEach(function(e){$("#idProofCheckbox_"+e.idProof.idProofId).prop("checked",!0),$("#idProofValue_"+e.idProof.idProofId).val(e.idProofNumber)})}):1==t?(s='<div id="language_details"><div class="row" style="margin:0;padding:1%;'+l.table.mainTable.tHead.style+';color:#fff"><b>Language Details :</b></div><table id="langTable" class="mdl-data-table mdl-js-data-table table table-striped mdl-shadow--2dp" cellspacing="0" width="100%"><thead></thead><tbody></tbody></table></div>',p="Candidate Language Edit",o="/getAllLanguage",d=function(e){processLanguage(e)},c=function(e){prefillLanguageTable(e)}):2==t?(s='<div class="row" style="margin:0;padding:1%;'+l.table.mainTable.tHead.style+';color:#fff"><b>Assets</b></div><div class="row mdl-shadow--2dp" style="margin: 1px;padding: 2% 1%;background-color:#fff"><div class="col-lg-3 col-lg-offset-2" style="margin-top: 8px;text-align: right"><font size="3">Asset : </font></div><div class="col-lg-4" id="assetMultiSelectDiv"><select id="assetMultiSelect" multiple="multiple"></select></div></div>',r="GET",p="Candidate Asset Edit",o="/support/api/getAssetReqForJobRole/?job_post_id="+a,d=function(e){processDataGetAssets(e)},c=function(e){if(null!=e){var t=[];e.forEach(function(e){t.push(e.asset.assetId)}),$("#assetMultiSelect").val(t),$("#assetMultiSelect").multiselect("rebuild")}},u=!0):3==t?(s='<div class="row" style="margin:0;padding:1%;'+l.table.mainTable.tHead.style+';color:#fff"><b>Date Of Birth</b></div><div class="row mdl-shadow--2dp" style="margin: 1px;padding: 2% 1%;background-color:#fff"><div class="col-lg-3 col-lg-offset-2" style="margin-top: 8px;text-align: right"><font size="3">DOB : </font></div><div class="col-lg-4"><input id="candidateDob" name="candidateDob" placeholder="When is your Birthday?" type="date" class="form-control input-md"  data-date-inline-picker="true"/></div></div>',$("#candidateDob").datepicker({dateFormat:"yy-mm-dd",changeYear:!0}),p="Candidate DOB Edit",c=function(e){if(null!=e&&e.length>0){var t=JSON.parse(e),a=new Date(t).getFullYear(),l=("0"+parseInt(new Date(t).getMonth()+1)).slice(-2),n=("0"+new Date(t).getDate()).slice(-2);$("#candidateDob").val(a+"-"+l+"-"+n)}}):4==t?(s='<div class="row"><div class="col-sm-3"><h5>Total Experience:</h5></div><div class="col-sm-9"><input id="candidateTotalExperienceYear" value="0" style="width: 15%; display: inline-block" placeholder="Years" type="number" class="form-control input-md">&nbsp;Years&nbsp;&nbsp;<input id="candidateTotalExperienceMonth" value="0" style="width: 15%; display: inline-block" placeholder="Months" type="number" min="0" max="11" step="1"  class="form-control input-md">&nbsp; Months</div></div>',p="Candidate Experience Edit",d=function(e){processExperience(e)},c=function(e){null!=e&&($("#candidateTotalExperienceYear").val(parseInt(e/12).toString()),$("#candidateTotalExperienceMonth").val(e%12))}):5==t?(s='<div class="row" style="margin:0;padding:1%;'+l.table.mainTable.tHead.style+';color:#fff"><b>Educational Details</b></div><div class="row mdl-shadow--2dp" id="education_details" style="margin: 1px;padding: 2% 1%;background-color:#fff"><div class="row"><div class="col-lg-5" style="margin-top: 8px;text-align: right"><font size="2">Highest Education Qualification : </font></div><div class="col-lg-4"><select id="candidateHighestEducation" size="5"></select></div></div><div class="row" style="margin-top: 10px;"><div class="col-lg-5" style="margin-top: 8px;text-align: right"><font size="2">Have you successfully completed this course?</font></div><div class="col-lg-4" style="padding-top: 8px;"><input type="radio" name="candidateEducationCompletionStatus" id="eduCompleted" value="1">&nbsp;Yes&nbsp;&nbsp;<input type="radio" name="candidateEducationCompletionStatus" id="eduCompletedNot" value="0">&nbsp;No</div></div><div class="row" id="educationalInstitute" style="margin-top: 10px;" ><div class="col-lg-5" style="margin-top: 8px;text-align: right"><font size="2">Highest Education Degree? </font></div><div class="col-lg-4" style="padding-top: 8px;"><select id="candidateHighestDegree" size="5"></select></div></div><div class="row" style="margin-top: 10px"><div class="col-lg-5" style="margin-top: 8px;text-align: right"><font size="2">Last attended Education Institute? </font></div><div class="col-lg-4"><input id="candidateEducationInstitute" style="width: 326px" placeholder="Which was the last college you went to?" type="text" class="form-control input-md"></div></div></div></div>',p="Candidate Education Edit",u=!0,o="/getAllEducation",d=function(e){processEducation(e)},c=function(e){null!=e&&(null!=e.education&&($("#candidateHighestEducation").val(e.education.educationId),$("#candidateHighestEducation").multiselect("rebuild")),null!=e.degree&&($("#candidateHighestDegree").val(e.degree.degreeId),$("#candidateHighestDegree").multiselect("rebuild")),null!=e.candidateLastInstitute&&$("#candidateEducationInstitute").val(e.candidateLastInstitute),"1"==e.candidateEducationCompletionStatus?$("input[id=eduCompleted]").attr("checked",!0):$("input[id=eduCompletedNot]").attr("checked",!0))}):6==t?(s='<div class="row" style="margin:0;padding:1%;'+l.table.mainTable.tHead.style+';color:#fff"><b>Candidate Gender</b></div><div class="row mdl-shadow--2dp" id="education_details" style="margin: 1px;padding: 2% 1%;background-color:#fff"><div class="col-lg-5" style="margin-top: 8px;text-align: right"><font size="3">Candidate Gender : </font></div><div class="col-lg-4" style="margin-top: 8px;"><input type="radio" name="gender" id="genderMale" value="0">&nbsp;Male&nbsp;&nbsp;<input type="radio" name="gender" id="genderFemale" value="1">&nbsp;Female</div></div>',p="Candidate Gender Edit",c=function(e){null!=e&&(0==e?$("input[id=genderMale]").attr("checked",!0):$("input[id=genderFemale]").attr("checked",!0))}):7==t?(s='<div class="row" style="margin:0;padding:1%;'+l.table.mainTable.tHead.style+';color:#fff"><b>Salary Details</b></div><div class="row mdl-shadow--2dp" id="education_details" style="margin: 1px;padding: 2% 1%;background-color:#fff"><div class="col-lg-5" style="margin-top: 8px;text-align: right"><font size="3">Current/Last Drawn Salary : </font></div><div class="col-lg-4"><input id="candidateLastWithdrawnSalary" placeholder="What was your LastWithdrawn Salary?" type="number" class="form-control input-md"></div></div>',p="Candidate Last Withdrawn Salary Edit",c=function(e){null!=e&&$("#candidateLastWithdrawnSalary").val(e)}):8==t?(s='<div class="row" style="margin:0;padding:1%;'+l.table.mainTable.tHead.style+';color:#fff"><b>Current Location</b></div><div class="row mdl-shadow--2dp" id="education_details" style="margin: 1px;padding: 2% 1%;background-color:#fff"><div class="col-lg-5" style="margin-top: 8px;text-align: right"><font size="3">Current Location : </font></div><div class="col-lg-4"><input type="text" id="candidateHomeLocality"></div></div>',p="Candidate Home Locality Edit",o="/getAllLocality",u=!0,d=function(e){processLocality(e)},c=function(e){if(console.log("setting candidate locality"),null!=e)try{var t={};t.id=e.localityId,t.name=e.localityName,currentLocationArray.push(t),$("#candidateHomeLocality").tokenInput("add",t)}catch(a){console.log("homeLocality"+a.stack)}}):9==t&&(s='<div class="row" style="margin:0;padding:1%;'+l.table.mainTable.tHead.style+';color:#fff"><b>Job TimeShift Preferences</b></div><div class="row mdl-shadow--2dp" id="education_details" style="margin: 1px;padding: 2% 1%;background-color:#fff"><div class="col-lg-5" style="margin-top: 8px;text-align: right"><font size="3">Preferred work shift? </font></div><div class="col-lg-4"><select id="candidateTimeShiftPref" size="5"></select></div></div></div>',p="Candidate Work-Shift Edit",o="/getAllShift",u=!0,d=function(e){processTimeShift(e)},c=function(e){null!=e&&($("#candidateTimeShiftPref").val(e.timeShift.timeShiftId),$("#candidateTimeShiftPref").multiselect("rebuild"))}),generateEditModalView(p,s,e,t,u,a,n),null!=o)try{$.ajax({type:r,url:o,data:!1,async:!1,contentType:!1,processData:!1,success:d})}catch(m){console.log("exception occured!!"+m)}if(5==t)try{$.ajax({type:"POST",url:"/getAllDegree",data:!1,contentType:!1,processData:!1,success:processDegree})}catch(m){console.log("exception occured!!"+m)}try{$.ajax({type:"GET",url:i,data:!1,contentType:!1,processData:!1,success:c})}catch(m){console.log("exception occured!!"+m.stack)}}function constructPreScreenBodyContainer(e,t,a){var l=e.candidateId,n=e.jobPostId,i=$('<div class="'+t.container.className+'" id="pre_screen_container_row"></div>'),o=$('<div id="minReqTable"></div>');i.append('<h4 class="mdl-shadow--2dp" style="'+t.table.mainTable.titleStyle+'">'+t.table.mainTable.title+"</h4>"),i.append(o);var d=$('<div id="otherReqTable"></div>');i.append('<h4 class="mdl-shadow--2dp" style="'+t.table.otherTable.titleStyle+'">'+t.table.otherTable.title+"</h4>"),i.append(d);var r=document.createElement("table");r.className=t.table.mainTable.className,r.style=t.table.mainTable.style;var c=document.createElement("thead");c.style=t.table.mainTable.tHead.style,r.appendChild(c);var s=document.createElement("tr");if(c.appendChild(s),$.inArray(1,t.columnVisible)>-1){var p=document.createElement("th");p.textContent=t.table.mainTable.tHead.titleText_1,s.appendChild(p)}if($.inArray(2,t.columnVisible)>-1){var u=document.createElement("th");u.textContent=t.table.mainTable.tHead.titleText_2,u.style="color:#ffffff",s.appendChild(u)}if($.inArray(3,t.columnVisible)>-1){var m=document.createElement("th");m.style="color:#ffffff",m.textContent=t.table.mainTable.tHead.titleText_3,s.appendChild(m)}if($.inArray(4,t.columnVisible)>-1){var b=document.createElement("th");b.textContent=t.table.mainTable.tHead.titleText_4,b.style="color:#ffffff",s.appendChild(b)}if($.inArray(5,t.columnVisible)>-1){var f=document.createElement("th");f.style="color:#ffffff",f.textContent=t.table.mainTable.tHead.titleText_5,s.appendChild(f)}if($.inArray(6,t.columnVisible)>-1){var h=document.createElement("th");h.style="color:#ffffff",h.textContent=t.table.mainTable.tHead.titleText_6,s.appendChild(h)}var v=document.createElement("tbody");r.appendChild(v),o.append(r);var g=document.createElement("table");g.className=t.table.otherTable.className,g.style=t.table.otherTable.style;var c=document.createElement("thead");c.style=t.table.otherTable.tHead.style,g.appendChild(c);var s=document.createElement("tr");if(c.appendChild(s),$.inArray(1,t.columnVisible)>-1){var p=document.createElement("th");p.textContent=t.table.otherTable.tHead.titleText_1,s.appendChild(p)}if($.inArray(2,t.columnVisible)>-1){var u=document.createElement("th");u.style="color:#ffffff",u.textContent=t.table.otherTable.tHead.titleText_2,s.appendChild(u)}if($.inArray(3,t.columnVisible)>-1){var m=document.createElement("th");m.style="color:#ffffff",m.textContent=t.table.otherTable.tHead.titleText_3,s.appendChild(m)}if($.inArray(4,t.columnVisible)>-1){var b=document.createElement("th");b.style="color:#ffffff",b.textContent=t.table.otherTable.tHead.titleText_4,s.appendChild(b)}if($.inArray(5,t.columnVisible)>-1){var f=document.createElement("th");f.style="color:#ffffff",f.textContent=t.table.otherTable.tHead.titleText_5,s.appendChild(f)}if($.inArray(6,t.columnVisible)>-1){var h=document.createElement("th");h.style="color:#ffffff",h.textContent=t.table.otherTable.tHead.titleText_6,s.appendChild(h)}var y=document.createElement("tbody");g.appendChild(y),d.append(g);var x=$('<div class="row" style="margin-top: 20px"></div>');if(t.textContainers.visibility){if(t.textContainers.minReqContainer.visibility){var C=document.createElement("div");C.className=t.textContainers.minReqContainer.className,C.id="minReqContainer";var E=document.createElement("textarea");E.className="form-control mdl-shadow--2dp",E.rows="5",E.type="text",E.style="border-radius:0;",E.id="job_post_min_req",E.disabled=!0;var S;S=null!=e.jobPostMinReq&&""!=e.jobPostMinReq?e.jobPostMinReq:"NA",E.textContent=S;var I=document.createElement("div");I.style=t.table.rowHeading.post.style,C.appendChild(I);var T=document.createElement("label");T["for"]="job_post_min_req",T.style="margin:0",T.textContent=t.textContainers.minReqContainer.title,I.appendChild(T),C.appendChild(E),x.append(C),console.log("added minreq text area to PS_Modal")}if(t.textContainers.noteContainer.visibility){var k=document.createElement("div");k.className=t.textContainers.noteContainer.className,k.id="noteContainer";var P=document.createElement("textarea");P.className="form-control mdl-shadow--2dp",P.style="border-radius:0;",P.rows="5",P.type="text",P.placeholder="Extra Comment",P.id="pre_screen_note";var N=document.createElement("div");N.style=t.table.rowHeading.note.style,k.appendChild(N);var T=document.createElement("label");T["for"]="pre_screen_note",T.textContent=t.textContainers.noteContainer.title,T.style="margin :0",N.appendChild(T),k.appendChild(P),x.append(k),console.log("added note text area to PS_Modal")}i.append(x)}var _=e.elementList;return _.forEach(function(e){if(null!=e)if(e.isMinReq){var i=document.createElement("tr");if(i.id=e.propertyId,v.appendChild(i),$.inArray(1,t.columnVisible)>-1){var o=document.createElement("td");o.style="font-weight:600",o.textContent=e.propertyTitle,i.appendChild(o)}if($.inArray(2,t.columnVisible)>-1){var d=document.createElement("td");d.id="jobPostValue_"+e.propertyId,i.appendChild(d),e.isSingleEntity?d.textContent=getPlaceholderValue(e.jobPostElement):d.textContent=getPlaceholderArray(e.jobPostElementList)}if($.inArray(3,t.columnVisible)>-1){var r=document.createElement("td");r.id="candidateValue_"+e.propertyId,i.appendChild(r),e.isSingleEntity?r.textContent=getPlaceholderValue(e.candidateElement):r.textContent=getPlaceholderArray(e.candidateElementList)}if($.inArray(4,t.columnVisible)>-1){var c=document.createElement("td"),s=document.createElement("span");e.isMatching?s.setAttribute("class",t.table.glyphIconCorrectClass):s.setAttribute("class",t.table.glyphIconWrongClass),c.appendChild(s),i.appendChild(c)}if($.inArray(5,t.columnVisible)>-1){var p=document.createElement("td");i.appendChild(p);var u=document.createElement("label");u.type="checkbox",u.id="ready_checkbox_"+e.propertyId,u["for"]="checkbox_"+e.propertyIdList.join("-"),u.style="text-align:center",u.className=t.table.idProofCheckbox.checkboxLabel.className,p.appendChild(u);var m=document.createElement("input");m.type="checkbox",m.id="checkbox_"+e.propertyIdList.join("-"),m.className=t.table.idProofCheckbox.checkboxMatch.className,u.appendChild(m)}if($.inArray(6,t.columnVisible)>-1){var b=document.createElement("td"),f=document.createElement("a");if(!("3"==e.propertyId&&r.textContent.length>0)){var h=document.createTextNode(t.edit.title);f.appendChild(h),f.style="cursor: pointer",f.onclick=function(){fetchEditModalContent(l,e.propertyId,n,t,a)}}b.appendChild(f),i.appendChild(b)}}else{var i=document.createElement("tr");if(i.id=e.propertyId,y.appendChild(i),$.inArray(1,t.columnVisible)>-1){var o=document.createElement("td");o.style="font-weight:600",o.textContent=e.propertyTitle,i.appendChild(o)}if($.inArray(2,t.columnVisible)>-1){var d=document.createElement("td");d.id="jobPostValue_"+e.propertyId,i.appendChild(d),e.isSingleEntity?d.textContent=getPlaceholderValue(e.jobPostElement):d.textContent=getPlaceholderArray(e.jobPostElementList)}if($.inArray(3,t.columnVisible)>-1){var r=document.createElement("td");r.id="candidateValue_"+e.propertyId,i.appendChild(r),e.isSingleEntity?r.textContent=getPlaceholderValue(e.candidateElement):r.textContent=getPlaceholderArray(e.candidateElementList)}if($.inArray(4,t.columnVisible)>-1){var c=document.createElement("td"),s=document.createElement("span");e.isMatching?s.setAttribute("class",t.table.glyphIconCorrectClass):s.setAttribute("class",t.table.glyphIconWrongClass),c.appendChild(s),i.appendChild(c)}if($.inArray(5,t.columnVisible)>-1){var p=document.createElement("td");i.appendChild(p);var u=document.createElement("label");u.type="checkbox",u["for"]="checkbox_"+e.propertyIdList.join("-"),u.style="text-align:center",u.className=t.table.idProofCheckbox.checkboxLabel.className,p.appendChild(u);var m=document.createElement("input");m.type="checkbox",m.id="checkbox_"+e.propertyIdList.join("-"),m.className=t.table.idProofCheckbox.checkboxMatch.className,u.appendChild(m)}if($.inArray(6,t.columnVisible)>-1){var b=document.createElement("td"),f=document.createElement("a");if(!("6"==e.propertyId&&r.textContent.length>0)){var h=document.createTextNode(t.edit.title);f.appendChild(h),f.style="cursor: pointer",f.title=t.edit.title,f.onclick=function(){fetchEditModalContent(l,e.propertyId,n,t,a)}}b.appendChild(f),i.appendChild(b)}}}),i}function getPlaceholderArray(e){var t=[];return null!=e&&e.forEach(function(e){null!=e&&t.push(e.placeHolder)}),t}function getPlaceholderValue(e){return null!=e?e.placeHolder:""}function processPreScreenContent(e,t,a){if(null==e||"SUCCESS"!=e.status)return console.log(e),
void(null!=e&&"INVALID"==e.status?notifyModal("Pre Screen Status: Completed","Pre Screen Already Completed"):notifyModal("Error","Request failed. Something went Wrong! Please Refresh"));if(null!=e){if(0==e.elementList.length)return void bootbox.hideAll();var l=e.candidateId,n=e.jobPostId,i=$('<div id="pre_screen_body" class="'+t.container.className+'"></div>'),o=constructPreScreenBodyContainer(e,t,a);i.append(o);var d;d=t.callYesNoRequired?$('<div class="row"><div class="col-sm-6"><h5 id="callConfirmation" style="margin:2px">Call Connected? :&nbsp; <input type="radio" name="callConnected" id="callYes" value="yes" onclick="onCallYes('+l+", "+n+')">&nbsp;Yes&nbsp; <input type="radio" name="callConnected" id="callNo" value="no"  onclick="onCallNo('+l+", "+n+')">&nbsp;No <div id="callNoClass" style="display: none;"><h6>Reason?:<select id="callResponse" class="selectDropdown" style="margin: 0 8px;" ><option value="busy">Busy</option><option value="not_reachable">Not Reachable</option><option value="not_answering">Not Answering</option><option value="switched_off">Switched Off</option><option value="dnd">DND</option><option value="third_person">Third Person</option><option value="others">Others</option></select><button type="submit" id="responseSaveBtn"  class="'+t.callYesNo.button.className+'" onclick="saveAttempt('+l+", "+n+')">Save</button></h6></div></h5></div></div>'):t.preScreen.title,renderParentModal(i,d,n,l,t,a)}}function renderParentModal(e,t,a,l,n,i){var o=bootbox.dialog({className:n.bootBoxMain.className,title:t,message:e,closeButton:!0,animate:!0,onEscape:function(){$("body").removeClass("open-modal")},buttons:{Next:{className:n.finalSubmissionButton.className,callback:function(){return 0==$("#pre_screen_body input[type='checkbox']:checked").size()&&null==$('input:radio[name="verdict"]:checked').val()?(bootbox.alert({size:"small",title:"Invalid Submission !",message:"If you want to mark the candidate as  'completed_prescreening' irrespective of given criteria, select checkbox present next to submit button, in previous dialog.",callback:function(){}}),!1):($("body").removeClass("open-modal"),triggerPreScreenResponseSubmission(l,a,i),console.log("final prescreen submission triggered"),!0)}}}});o.init(function(){var e=$(".modal-footer"),t=$('<div class="col-xs-11" style="text-align: right"><h5 style="margin:2px; font-size: 12px;"><div style="display:inline-block; margin: 0 1px;text-align: left; color: #b9151b" id="footerMessage">*</div>'+n.modalFooter.footerMessage+'&nbsp;:&nbsp;<div style="display: inline-block; vertical-align: middle; margin: 0px;"><input type="radio" name="verdict" id="pass" value="1" style="margin: 0 2px" onclick="activateSubmit('+n.callYesNoRequired+')">Yes<input type="radio" name="verdict" id="fail" value="0" style="margin: 0 2px" onclick="activateSubmit('+n.callYesNoRequired+')">No</div></h5></div>');e.prepend(t),n.finalSubmissionButton.init.disabled&&$(".btn.modal-submit").prop("disabled",!0),n.callYesNoRequired?$("#pre_screen_body").hide():$("#pre_screen_body").show(),$("body").removeClass("modal-open").removeClass("open-modal").addClass("open-modal")})}function processPostPreScreenResponse(e,t,a,l){console.log(e),"OK"==e?(notifyError("Submitted successfully.","success"),setTimeout(function(){location.reload()},2e3)):"INTERVIEW"==e?(notifyError("Submitted successfully. Please select Interview Slot.","success"),initInterviewModal(t,a,l)):notifyError("Error! Something Went wrong please try again.","danger")}function reProcessPreScreenContent(e,t,a){if(null!=e&&"SUCCESS"==e.status||(console.log(e),pushToSnackbar("Request failed. Something went Wrong! Please Refresh")),null!=e){for(var l=constructPreScreenBodyContainer(e,t,a),n=$("#pre_screen_body input[type='checkbox']:checked").parent(),i=[],o=n.size(),d=0;d<o;d++){var r=n[d].id,c=r.split("_")[2];i.push(parseInt(c))}$("#pre_screen_body").html(l);for(var d=0;d<o;d++){var c=i[d];console.log("id-->"+c+" <-"),$("#ready_checkbox_"+c).children().prop("checked",!0)}}}function getPreScreenContent(e,t,a,l,n,i){null==l&&(i=!0,l=null!=decorator?decorator:initDecorator(null));var o="/support/api/getJobPostVsCandidate/";if(null==o||null==e)return void console.log("please provide candidateId && jobPostId");o+="?",null!=e&&(o+="jobPostId="+e),null!=t&&(o+="&candidateId="+t),o+=null!=n&&n?"&rePreScreen="+!0:"&rePreScreen="+!1,o+="&candidateMobile",console.log(" url link : "+o);var d;d=a?function(e){reProcessPreScreenContent(e,l,i)}:function(e){processPreScreenContent(e,l,i)},console.log("jobPostVsCandidate_URL: "+o);try{$.ajax({type:"GET",url:o,data:!1,async:!1,contentType:!1,processData:!1,success:d})}catch(r){console.log("exception occured!!"+r.stack)}}function pushToSnackbar(e){"use strict";var t=document.querySelector("#tru-snackbar"),a={message:JSON.stringify(e),timeout:4e3};t.MaterialSnackbar.showSnackbar(a)}function notifyError(e,t){$.notify({message:e,animate:{enter:"animated lightSpeedIn",exit:"animated lightSpeedOut"}},{type:t,placement:{from:"top",align:"center"}})}var langArray=[],currentLocationArray=[],localityArray=[],globalPalette={color:{main:{headerColor:"rgb(63,81,181)"}}},decorator;