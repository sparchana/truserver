function getLocality(){return allLocalityArray}function getJob(){return allJobArray}function getJobPref(e){var a=[];try{e.forEach(function(e){var t=e.jobRole.jobName;a.push(" "+t)})}catch(t){}return a}function getLocalityPref(e){var a=[];try{e.forEach(function(e){var t=e.locality.localityName;a.push(" "+t)})}catch(t){}return a}function getInYearMonthFormat(e){if(null==e)return"NA";var a=Math.round(parseInt(e)/12*100)/100;return a}function getLanguageKnown(e){var a=[];try{if(null==e||e.length<1)return"NA";e.forEach(function(e){a.push(""+e.language.languageName+" ("+e.understanding+", "+e.verbalAbility+", "+e.readWrite+")")})}catch(t){}return a}function getLastWithdrawnSalary(e){return null==e?"NA":e}function getGender(e){return null==e?"NA":"0"==e?"M":"1"==e?"F":void 0}function getEducation(e){return null!=e&&null!=e.education?e.education.educationName:"NA"}function getSkills(e){var a=[];return null!=e&&(e.forEach(function(e){if(null!=e&&null!=e.candidateSkillResponse){var t;t=1==e.candidateSkillResponse?"Yes":"No",a.push(" "+e.skill.skillName+" : "+t)}}),a.length>0)?a:"NA"}function getHomeLocality(e){return null!=e?e.localityName:"NA"}function getDateTime(e){var a=new Date(e).getUTCFullYear()+"-"+("0"+(new Date(e).getUTCMonth()+1)).slice(-2)+"-"+("0"+new Date(e).getDate()).slice(-2)+" "+("0"+new Date(e).getHours()).slice(-2)+":"+("0"+new Date(e).getMinutes()).slice(-2)+":"+("0"+new Date(e).getSeconds()).slice(-2);return a}function getPastOrCurrentCompanyName(e){var a=[];return null!=e&&e.forEach(function(e){if(null!=e&&null!=e.candidatePastCompany){var t=e.currentJob?" *":"";a.push(" "+e.candidatePastCompany+t)}}),a.length>0?a:"NA"}function getYesNo(e){return null!=e?"0"==e||0==e?"No":"yes":"NA"}function getExperience(e){var a=[];return null!=e?(e.forEach(function(e){null!=e&&null!=e.jobExpQuestion&&null!=e.jobExpResponse&&a.push(" "+e.jobExpQuestion.jobRole.jobName+": "+e.jobExpQuestion.expCategory.expCategoryName+": "+e.jobExpResponse.jobExpResponseOption.jobExpResponseOptionName)}),a):"NA"}function getAge(e){var a=Date.now()-e,t=new Date(a);return Math.abs(t.getUTCFullYear()-1970)}function getProperProfileStatus(e){return null!=e?"1"==e.profileStatusId?"Active":e.profileStatusName:"NA"}function getExpiry(e){return null!=e?e.statusExpiryDate:"NA"}function getLastName(e){return null!=e?e:"NA"}function getFirstName(e){return null!=e?e:"NA"}function getIdProof(e){var a=[];return null!=e&&(e.forEach(function(e){null!=e&&null!=e.idProof&&null!=e.idProof.idProofName&&a.push(" "+e.idProof.idProofName)}),a.length>0)?a:"NA"}var allLocalityArray=[],allJobArray=[],shouldAddFooter=!0;$(function(){"use strict";var e={jpId:534,jpJobRoleId:0,jpLocalityIdList:[],jpMinSalary:null,jpMaxSalary:null,jpMinAge:null,jpMaxAge:null,jpExperienceId:null,jpGender:null,jpEducationId:null,jpLanguageIdList:[],jpTableFormattedCandidateList:[],jpCandidateList:[],jpTotalExpInMonths:null,tableContainer:$("#candidateMatchResultTable"),tableContainerId:"candidateMatchResultTable",formSubmit:$("#candidateMatchForm"),url:"/support/api/getMatchingCandidate/",shouldSend:!0};e.notify=function(e,a){$.notify({message:e,animate:{enter:"animated lightSpeedIn",exit:"animated lightSpeedOut"}},{type:a})},e.init=function(){function e(e){if(null!=e){var a=[{label:"Select None",value:"0"}];e.forEach(function(e){var t={label:e.educationName,value:parseInt(e.educationId)};a.push(t)});var t=$("#educationSelect");t.multiselect({nonSelectedText:"None Selected",maxHeight:300}),t.multiselect("dataprovider",a),t.multiselect("rebuild")}}function a(e){if(null!=e){var a=[];e.forEach(function(e){var t={label:e.languageName,value:parseInt(e.languageId)};a.push(t)});var t=$("#languageMultiSelect");t.multiselect({includeSelectAllOption:!0,maxHeight:300}),t.multiselect("dataprovider",a),t.multiselect("rebuild")}}function t(e){e.forEach(function(e){var a=e.localityId,t=e.localityName,n={};n.id=a,n.name=t,allLocalityArray.push(n)})}function n(e){e.forEach(function(e){var a=e.jobRoleId,t=e.jobName,n={};n.id=a,n.name=t,allJobArray.push(n)})}function o(e){var a=[{label:"Select None",value:"0"}];e.forEach(function(e){var t={label:e.experienceType,value:parseInt(e.experienceId)};a.push(t)});var t=$("#experienceSelect");t.multiselect({nonSelectedText:"None Selected",maxHeight:300}),t.multiselect("dataprovider",a),t.multiselect("rebuild")}NProgress.start();try{$.ajax({type:"POST",url:"/getAllLanguage",data:!1,async:!1,contentType:!1,processData:!1,success:a})}catch(l){void 0}try{$.ajax({type:"POST",url:"/getAllLocality",data:!1,async:!1,contentType:!1,processData:!1,success:t})}catch(l){void 0}try{$.ajax({type:"POST",url:"/getAllJobs",data:!1,async:!1,contentType:!1,processData:!1,success:n})}catch(l){void 0}try{$.ajax({type:"POST",url:"/getAllEducation",data:!1,async:!1,contentType:!1,processData:!1,success:e})}catch(l){void 0}try{$.ajax({type:"POST",url:"/getAllExperience",data:!1,async:!1,contentType:!1,processData:!1,success:o})}catch(l){void 0}NProgress.done()},e.initParams=function(){NProgress.start();try{$.ajax({type:"POST",url:"/getJobPostInfo/"+e.jpId+"/1",data:!1,async:!1,contentType:!1,processData:!1,success:e.processParamsAndUpdateUI})}catch(a){void 0}NProgress.done()},e.processParamsAndUpdateUI=function(a){if(null!=a){if(e.jpId=a.jobPostId,null!=a.jobPostMinAge&&(e.jpMinAge=a.jobPostMinAge,$("#minAge").val(e.jpMinAge)),null!=a.jobPostMaxAge&&(e.jpMaxAge=a.jobPostMaxAge,$("#maxAge").val(e.jpMaxAge)),null!=a.gender&&(e.jpGender=a.gender,$("#genderSelect").val(e.jpGender),$("#genderSelect").multiselect("rebuild"),void 0),null!=a.jobPostExperience&&(e.jpExperienceId=a.jobPostExperience.experienceId,$("#experienceSelect").val(e.jpExperienceId),$("#experienceSelect").multiselect("rebuild"),void 0),null!=a.jobPostEducation&&(e.jpEducationId=a.jobPostEducation.educationId,$("#educationSelect").val(e.jpEducationId),$("#educationSelect").multiselect("rebuild"),void 0),null!=a.jobPostLanguageRequirement){var t=a.jobPostLanguageRequirement;e.jpLanguageIdList=[],t.forEach(function(a){null!=a&&e.jpLanguageIdList.push(a.language.languageId)}),$("#languageMultiSelect").val(e.jpLanguageIdList),$("#languageMultiSelect").multiselect("rebuild")}null!=a.jobPostMinSalary&&(e.jpMinSalary=a.jobPostMinSalary,$("#minSalary").val(e.jpMinSalary)),null!=a.jobPostMaxSalary&&(e.jpMaxSalary=a.jobPostMaxSalary,$("#maxSalary").val(e.jpMaxSalary));var n=[];if(null!=a.jobRole){e.jpJobRoleId=null;var o={};o.id=a.jobRole.jobRoleId,o.name=a.jobRole.jobName,n.push(o),e.jpJobRoleId=a.jobRole.jobRoleId,void 0}""==$("#jobPostJobRole").val()&&$("#jobPostJobRole").tokenInput(getJob(),{theme:"facebook",placeholder:"Job Role?",hintText:"Start typing jobs (eg. Cook, Delivery boy..)",minChars:0,tokenLimit:1,prePopulate:n,preventDuplicates:!0});var l;null!=a.jobPostToLocalityList&&(e.jpLocalityIdList=[],l=[],a.jobPostToLocalityList.forEach(function(a){var t={};t.id=a.locality.localityId,t.name=a.locality.localityName,l.push(t),e.jpLocalityIdList.push(a.locality.localityId)})),""==$("#jobPostLocality").val()&&$("#jobPostLocality").tokenInput(getLocality(),{theme:"facebook",placeholder:"job Localities?",hintText:"Start typing Area (eg. BTM Layout, Bellandur..)",minChars:0,prePopulate:l,preventDuplicates:!0}),e.fetchCandidateList()}},e.fetchCandidateList=function(){var a,t=$("#jobPostLocality").val().split(","),n=$("#languageMultiSelect").val();if(e.jpLocalityIdList=[],null!=n)for(e.jpLanguageIdList=[],a=0;a<n.length;a++)e.jpLanguageIdList.push(parseInt(n[a]));if(null!=t)for(a=0;a<t.length;a++)e.jpLocalityIdList.push(parseInt(t[a]));if(e.jpJobRoleId=null,e.jpJobRoleId=parseInt($("#jobPostJobRole").val()),void 0,e.jpExperienceId=$("#experienceSelect").val(),void 0,e.jpEducationId=$("#educationSelect").val(),void 0,e.jpGender=$("#genderSelect").val(),void 0,e.jpMinSalary=$("#minSalary").val(),e.jpMaxSalary=$("#maxSalary").val(),e.jpMinAge=$("#minAge").val(),e.jpMaxAge=$("#maxAge").val(),null!=e.jpJobRoleId&&null!=e.jpLocalityIdList&&0!=e.jpLocalityIdList.length||(e.shouldSend=!1),e.shouldSend){var o={jobPostId:e.jpId,minAge:e.jpMinAge,maxAge:e.jpMaxAge,minSalary:e.jpMinSalary,maxSalary:e.jpMaxSalary,experienceId:e.jpExperienceId,gender:e.jpGender,jobPostJobRoleId:e.jpJobRoleId,jobPostEducationId:e.jpEducationId,jobPostLocalityIdList:e.jpLocalityIdList,jobPostLanguageIdList:e.jpLanguageIdList};void 0,NProgress.start();try{$.ajax({type:"POST",url:e.url,async:!1,contentType:"application/json; charset=utf-8",data:JSON.stringify(o),success:e.updateMatchTable})}catch(l){void 0}NProgress.done()}},e.updateMatchTable=function(a){e.jpCandidateList=[],$.each(a,function(a,t){null!=t&&e.jpCandidateList.push(t.candidate)}),void 0,e.renderTable()},e.renderTable=function(){if(null==e.jpCandidateList||0==e.jpCandidateList.length)return void 0,e.tableContainer.hide(),void e.notify("No Candidates Matched !","danger");var a=[];try{e.jpCandidateList.forEach(function(e){var t="",n="";null!=e.timeShiftPreference&&(t=e.timeShiftPreference.timeShift.timeShiftName),null!=e.locality&&(n=e.locality.localityName),a.push({cLID:'<a href="/candidateSignupSupport/'+e.lead.leadId+'/false" target="_blank">'+e.lead.leadId+"</a>",candidateFirstName:getFirstName(e.candidateFirstName)+" "+getLastName(e.candidateLastName),candidateMobile:e.candidateMobile,candidateLastWithdrawnSalary:getLastWithdrawnSalary(e.candidateLastWithdrawnSalary),candidateJobPref:getJobPref(e.jobPreferencesList),candidateLocalityPref:getLocalityPref(e.localityPreferenceList),locality:getHomeLocality(e.locality),candidateLanguage:getLanguageKnown(e.languageKnownList),candidateEducation:getEducation(e.candidateEducation),candidateSkillList:getSkills(e.candidateSkillList),candidateTimeShiftPref:t,candidateExperience:getInYearMonthFormat(e.candidateTotalExperience),candidateIsAssessmentComplete:getYesNo(e.candidateIsAssessed),candidateGender:getGender(e.candidateGender),candidateIsEmployed:getYesNo(e.candidateIsEmployed),candidateCreateTimestamp:getDateTime(e.candidateCreateTimestamp),pastOrCurrentCompanyName:getPastOrCurrentCompanyName(e.jobHistoryList),isMinProfileComplete:getYesNo(e.isMinProfileComplete),followUp:getYesNo(e.lead.followUp),noOfJobApplication:e.jobApplicationList.length,experience:getExperience(e.candidateExpList),age:getAge(e.candidateDOB),candidateExperienceLetter:getYesNo(e.candidateExperienceLetter),isActive:getProperProfileStatus(e.candidateprofilestatus),candidateExpiry:getExpiry(e.candidateStatusDetail),candidateIdProofs:getIdProof(e.idProofReferenceList)})}),e.tableContainer.show();var t=$("table#"+e.tableContainerId).DataTable({data:a,order:[[15,"desc"]],scrollX:!0,columns:[{data:"cLID"},{data:"candidateFirstName"},{data:"candidateMobile"},{data:"candidateJobPref"},{data:"candidateLocalityPref"},{data:"locality"},{data:"candidateExperience"},{data:"candidateIsEmployed"},{data:"candidateLastWithdrawnSalary"},{data:"candidateLanguage"},{data:"candidateEducation"},{data:"candidateSkillList"},{data:"candidateGender"},{data:"candidateIsAssessmentComplete"},{data:"candidateTimeShiftPref"},{data:"candidateCreateTimestamp"},{data:"pastOrCurrentCompanyName"},{data:"isMinProfileComplete"},{data:"followUp"},{data:"noOfJobApplication"},{data:"experience"},{data:"age"},{data:"candidateExperienceLetter"},{data:"isActive"},{data:"candidateExpiry"},{data:"candidateIdProofs"}],deferRender:!0,scroller:!0,scrollY:"48vh",scrollCollapse:!0,language:{emptyTable:"No data available"},destroy:!0,dom:"Bfrtip",buttons:["copy","csv","excel"]});t.columns().every(function(){var e=this;$("input",this.footer()).on("keyup change",function(){e.search()!==this.value&&e.search(this.value).draw()})}),$.fn.dataTable.moment("dd/MM/YYYY HH:mm:ss")}catch(n){void 0}e.addFooter()},e.addFooter=function(){shouldAddFooter&&($("#"+e.tableContainerId+" tfoot th").each(function(){var e=$(this).text();$(this).html('<input type="text" name="'+e+'"  id="'+e+'" placeholder="'+e+'" />')}),shouldAddFooter=!1)},e.init(),e.initParams(),e.formSubmit.submit(function(a){a.preventDefault(),e.fetchCandidateList(),shouldAddFooter&&e.addFooter()})});