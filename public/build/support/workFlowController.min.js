function getLocality(){return allLocalityArray}function getJob(){return allJobArray}function getAppliedOn(e){return null!=e?e:"NA"}function getJobPref(e){var t=[];try{e.forEach(function(e){var a=e.jobRole.jobName;t.push(" "+a)})}catch(a){}return t}function getLocalityPref(e){var t=[];try{e.forEach(function(e){var a=e.locality.localityName;t.push(" "+a)})}catch(a){}return t}function getInYearMonthFormat(e){if(null==e)return"NA";var t=Math.round(parseInt(e)/12*100)/100;return t}function getLanguageKnown(e){var t=[];try{if(null==e||e.length<1)return"NA";e.forEach(function(e){t.push(""+e.language.languageName+" ("+e.understanding+", "+e.verbalAbility+", "+e.readWrite+")")})}catch(a){}return t}function getLastWithdrawnSalary(e){return null==e?"NA":e}function getGender(e){return null==e?"NA":"0"==e?"M":"1"==e?"F":void 0}function getEducation(e){return null!=e&&null!=e.education?e.education.educationName:"NA"}function getSkills(e){var t=[];return null!=e&&(e.forEach(function(e){if(null!=e&&null!=e.candidateSkillResponse){var a;a=1==e.candidateSkillResponse?"Yes":"No",t.push(" "+e.skill.skillName+" : "+a)}}),t.length>0)?t:"NA"}function getHomeLocality(e){return null!=e?e.localityName:"NA"}function getDateTime(e){var t=new Date(e).getUTCFullYear()+"-"+("0"+(new Date(e).getUTCMonth()+1)).slice(-2)+"-"+("0"+new Date(e).getDate()).slice(-2)+" "+("0"+new Date(e).getHours()).slice(-2)+":"+("0"+new Date(e).getMinutes()).slice(-2)+":"+("0"+new Date(e).getSeconds()).slice(-2);return t}function getPastOrCurrentCompanyName(e){var t=[];return null!=e&&e.forEach(function(e){if(null!=e&&null!=e.candidatePastCompany){var a=e.currentJob?" *":"";t.push(" "+e.candidatePastCompany+a)}}),t.length>0?t:"NA"}function getYesNo(e){return null!=e?"0"==e||0==e?"No":"Yes":"NA"}function getExperience(e){var t=[];return null!=e?(e.forEach(function(e){null!=e&&null!=e.jobExpQuestion&&null!=e.jobExpResponse&&t.push(" "+e.jobExpQuestion.jobRole.jobName+": "+e.jobExpQuestion.expCategory.expCategoryName+": "+e.jobExpResponse.jobExpResponseOption.jobExpResponseOptionName)}),t):"NA"}function getAge(e){var t=Date.now()-e,a=new Date(t);return Math.abs(a.getUTCFullYear()-1970)}function getProperProfileStatus(e){return null!=e?"1"==e.profileStatusId?"Active":e.profileStatusName:"NA"}function getExpiry(e){return null!=e?e.statusExpiryDate:"NA"}function getLastName(e){return null!=e?e:"NA"}function getFirstName(e){return null!=e?e:"NA"}function getIdProof(e){var t=[];return null!=e&&(e.forEach(function(e){null!=e&&null!=e.idProof&&null!=e.idProof.idProofName&&t.push(" "+e.idProof.idProofName)}),t.length>0)?t:"NA"}function showRadiusValue(e){document.getElementById("radiusValue").innerHTML=e}var globalRecAgentNumber,allLocalityArray=[],allJobArray=[],shouldAddFooter=!0,jobPostId;openPreScreenModal=function(e,t){void 0,getPreScreenContent(jobPostId,t)},callHandler=function(e,t){openPreScreenModal(e,t)},$(function(){"use strict";var e={jpId:null,jpJobRoleId:0,jpMinSalary:null,jpMaxSalary:null,jpMaxAge:null,jpGender:null,jpLocalityIdList:[],jpExperienceIdList:[],jpEducationIdList:[],jpLanguageIdList:[],jpTableFormattedCandidateList:[],jpCandidateList:[],jpTotalExpInMonths:null,tableContainer:$("#candidateResultTable"),tableContainerId:"candidateResultTable",formSubmit:$("#candidateMatchForm"),url:"/support/api/getMatchingCandidate/",view:"match_view",shouldSend:!0,table:null,jpSelectedCandidateList:[],urlSaveSelectedCandidate:"/support/api/saveSelectedCandidate/",currentView:""};e.notify=function(e,t){$.notify({message:e,animate:{enter:"animated lightSpeedIn",exit:"animated lightSpeedOut"}},{type:t,placement:{from:"top",align:"center"}})},e.setCurrentView=function(){var t=window.location.search.split("=");e.currentView=t[t.length-1]},e.setJPId=function(){var t=window.location.pathname.split("/");e.jpId=t[t.length-2],jobPostId=e.jpId},e.init=function(){function e(e){if(null!=e){var t=[];e.forEach(function(e){var a={label:e.educationName,value:parseInt(e.educationId)};t.push(a)});var a=$("#educationMultiSelect");a.multiselect({nonSelectedText:"None Selected",includeSelectAllOption:!0,maxHeight:300}),a.multiselect("dataprovider",t),a.multiselect("rebuild")}}function t(e){if(null!=e){var t=[];e.forEach(function(e){var a={label:e.languageName,value:parseInt(e.languageId)};t.push(a)});var a=$("#languageMultiSelect");a.multiselect({includeSelectAllOption:!0,maxHeight:300}),a.multiselect("dataprovider",t),a.multiselect("rebuild")}}function a(e){e.forEach(function(e){var t=e.localityId,a=e.localityName,n={};n.id=t,n.name=a,allLocalityArray.push(n)})}function n(e){e.forEach(function(e){var t=e.jobRoleId,a=e.jobName,n={};n.id=t,n.name=a,allJobArray.push(n)})}function i(e){var t=[];e.forEach(function(e){var a={label:e.experienceType,value:parseInt(e.experienceId)};t.push(a)});var a=$("#experienceMultiSelect");a.multiselect({nonSelectedText:"None Selected",includeSelectAllOption:!0,maxHeight:300}),a.multiselect("dataprovider",t),a.multiselect("rebuild")}NProgress.start();try{$.ajax({type:"POST",url:"/getAllLanguage",data:!1,async:!1,contentType:!1,processData:!1,success:t})}catch(l){void 0}try{$.ajax({type:"POST",url:"/getAllLocality",data:!1,async:!1,contentType:!1,processData:!1,success:a})}catch(l){void 0}try{$.ajax({type:"POST",url:"/getAllJobs",data:!1,async:!1,contentType:!1,processData:!1,success:n})}catch(l){void 0}try{$.ajax({type:"POST",url:"/getAllEducation",data:!1,async:!1,contentType:!1,processData:!1,success:e})}catch(l){void 0}try{$.ajax({type:"POST",url:"/getAllExperience",data:!1,async:!1,contentType:!1,processData:!1,success:i})}catch(l){void 0}},e.initParams=function(){NProgress.start();try{$.ajax({type:"POST",url:"/getJobPostInfo/"+e.jpId+"/1",data:!1,async:!1,contentType:!1,processData:!1,success:e.processParamsAndUpdateUI})}catch(t){void 0}},e.initJobCard=function(){NProgress.start();try{$.ajax({type:"POST",url:"/getJobPostInfo/"+e.jpId+"/1",data:!1,async:!1,contentType:!1,processData:!1,success:e.populateJobPostCardUI})}catch(t){void 0}},e.processParamsAndUpdateUI=function(t){if(null!=t){if(e.populateJobPostCardUI(t),e.jpId=t.jobPostId,null!=t.jobPostMaxAge&&(e.jpMaxAge=t.jobPostMaxAge,$("#maxAge").val(e.jpMaxAge)),null!=t.gender?(e.jpGender=t.gender,$("#genderSelect").val(e.jpGender)):e.jpGender=-1,$("#genderSelect").val(e.jpGender),$("#genderSelect").multiselect("rebuild"),null!=t.jobPostExperience&&(e.jpExperienceIdList=[],void 0,e.jpExperienceIdList.push(t.jobPostExperience.experienceId),$("#experienceMultiSelect").val(e.jpExperienceIdList),$("#experienceMultiSelect").multiselect("rebuild")),null!=t.jobPostEducation&&(e.jpEducationIdList=[],e.jpEducationIdList.push(t.jobPostEducation.educationId),$("#educationMultiSelect").val(e.jpEducationIdList),$("#educationMultiSelect").multiselect("rebuild")),void 0,null!=t.jobPostLanguageRequirements){var a=t.jobPostLanguageRequirements;e.jpLanguageIdList=[],a.forEach(function(t){null!=t&&e.jpLanguageIdList.push(t.language.languageId)}),$("#languageMultiSelect").val(e.jpLanguageIdList),$("#languageMultiSelect").multiselect("rebuild")}null!=t.jobPostMinSalary&&(e.jpMinSalary=t.jobPostMinSalary,$("#minSalary").val(e.jpMinSalary)),null!=t.jobPostMaxSalary&&(e.jpMaxSalary=t.jobPostMaxSalary,$("#maxSalary").val(e.jpMaxSalary));var n=[];if(null!=t.jobRole){e.jpJobRoleId=null;var i={};i.id=t.jobRole.jobRoleId,i.name=t.jobRole.jobName,n.push(i),e.jpJobRoleId=t.jobRole.jobRoleId}null!=n&&$("#jobPostJobRole").tokenInput(getJob(),{theme:"facebook",placeholder:"Job Role?",hintText:"Start typing jobs (eg. Cook, Delivery boy..)",minChars:0,tokenLimit:1,prePopulate:n,preventDuplicates:!0});var l;null!=t.jobPostToLocalityList&&(e.jpLocalityIdList=[],l=[],t.jobPostToLocalityList.forEach(function(t){var a={};a.id=t.locality.localityId,a.name=t.locality.localityName,l.push(a),e.jpLocalityIdList.push(t.locality.localityId)})),null!=l&&$("#jobPostLocality").tokenInput(getLocality(),{theme:"facebook",placeholder:"job Localities?",hintText:"Start typing Area (eg. BTM Layout, Bellandur..)",minChars:0,prePopulate:l,preventDuplicates:!0}),e.fetchCandidateList()}},e.fetchCandidateList=function(){var t,a=$("#jobPostLocality").val().split(","),n=$("#languageMultiSelect").val(),i=$("#experienceMultiSelect").val(),l=$("#educationMultiSelect").val();if(e.jpLanguageIdList=[],null!=n)for(t=0;t<n.length;t++)e.jpLanguageIdList.push(parseInt(n[t]));if(e.jpLocalityIdList=[],null!=a)for(t=0;t<a.length;t++)e.jpLocalityIdList.push(parseInt(a[t]));if(e.jpExperienceIdList=[],null!=i)for(t=0;t<i.length;t++)e.jpExperienceIdList.push(parseInt(i[t]));if(e.jpEducationIdList=[],null!=l)for(t=0;t<l.length;t++)e.jpEducationIdList.push(parseInt(l[t]));if(e.jpJobRoleId=null,e.jpJobRoleId=parseInt($("#jobPostJobRole").val()),e.jpGender=$("#genderSelect").val(),e.jpMinSalary=$("#minSalary").val(),e.jpMaxSalary=$("#maxSalary").val(),e.jpMaxAge=$("#maxAge").val(),null!=e.jpJobRoleId&&null!=e.jpLocalityIdList&&0!=e.jpLocalityIdList.length||(e.shouldSend=!1),e.shouldSend){NProgress.start();var o={jobPostId:e.jpId,maxAge:e.jpMaxAge,minSalary:e.jpMinSalary,maxSalary:e.jpMaxSalary,gender:e.jpGender,jobPostJobRoleId:e.jpJobRoleId,experienceIdList:e.jpExperienceIdList,jobPostEducationIdList:e.jpEducationIdList,jobPostLocalityIdList:e.jpLocalityIdList,jobPostLanguageIdList:e.jpLanguageIdList,distanceRadius:parseInt($("#radiusValue").text())};try{$.ajax({type:"POST",url:e.url,async:!1,contentType:"application/json; charset=utf-8",data:JSON.stringify(o),success:e.updateMatchTable})}catch(d){void 0}}},e.updateMatchTable=function(t){e.jpCandidateList=[],$.each(t,function(t,a){null!=a&&e.jpCandidateList.push(a)}),e.notify("Total Candidate Matched : "+e.jpCandidateList.length,"warning"),e.renderTable(e.jpCandidateList)},e.renderTable=function(t){if(null==t||0==t.length)return void 0,e.tableContainer.hide(),e.notify("No Candidates !","danger"),$("#moveSelectedBtn").attr("disabled",!0),void NProgress.done();$("#moveSelectedBtn").attr("disabled",!1);var a=[];try{t.forEach(function(t){e.addFooter();var n="",i="";null!=t.candidate.timeShiftPreference&&(n=t.candidate.timeShiftPreference.timeShift.timeShiftName),null!=t.candidate.locality&&(i=t.candidate.locality.localityName);var l="",o="";"pre_screen_view"==e.currentView&&(l=null!=t.extraData.jobApplicationMode?t.extraData.jobApplicationMode:"NA",null!=t.extraData.preScreenSelectionTimeStamp&&(o=getDateTime(t.extraData.preScreenSelectionTimeStamp)));var d=function(){return"pre_screen_view"==e.currentView?null==t.extraData.preScreenCallAttemptCount?"0":t.extraData.preScreenCallAttemptCount:""},c=function(){return"pre_screen_view"==e.currentView?null==t.extraData.preScreenCallAttemptCount||0==t.extraData.preScreenCallAttemptCount?'<input type="submit" value="Pre-Screen"  style="width:130px" onclick="callHandler('+t.candidate.candidateMobile+", "+t.candidate.candidateId+');" id="'+t.candidate.lead.leadId+'" class="btn btn-primary">':'<input type="submit" value="Pre-Screen Again"  style="width:130px" onclick="callHandler('+t.candidate.candidateMobile+", "+t.candidate.candidateId+');" id="'+t.candidate.lead.leadId+'" class="btn btn-default">':""};a.push({cLID:'<a href="/candidateSignupSupport/'+t.candidate.lead.leadId+'/false" target="_blank" id="'+t.candidate.lead.leadId+'">'+t.candidate.lead.leadId+"</a>",candidateFirstName:getFirstName(t.candidate.candidateFirstName)+" "+getLastName(t.candidate.candidateLastName),candidateMobile:t.candidate.candidateMobile,candidateJobPref:getJobPref(t.candidate.jobPreferencesList),candidateLocalityPref:getLocalityPref(t.candidate.localityPreferenceList),locality:getHomeLocality(t.candidate.locality),matchedLocality:t.candidate.matchedLocation,age:getAge(t.candidate.candidateDOB),candidateExperience:getInYearMonthFormat(t.candidate.candidateTotalExperience),candidateIsEmployed:getYesNo(t.candidate.candidateIsEmployed),candidateLastWithdrawnSalary:getLastWithdrawnSalary(t.candidate.candidateLastWithdrawnSalary),candidateLanguage:getLanguageKnown(t.candidate.languageKnownList),candidateEducation:getEducation(t.candidate.candidateEducation),candidateSkillList:getSkills(t.candidate.candidateSkillList),candidateGender:getGender(t.candidate.candidateGender),pastOrCurrentCompanyName:getPastOrCurrentCompanyName(t.candidate.jobHistoryList),candidateIsAssessmentComplete:getYesNo(t.extraData.assessmentAttemptId),jobAppliedOn:getAppliedOn(t.extraData.appliedOn),noOfJobApplication:t.candidate.jobApplicationList.length,candidateExperienceLetter:getYesNo(t.candidate.candidateExperienceLetter),candidateIdProofs:getIdProof(t.candidate.idProofReferenceList),candidateTimeShiftPref:n,lastActive:t.extraData.lastActive.lastActiveValueName,candidateCreateTimestamp:getDateTime(t.candidate.candidateCreateTimestamp),isMinProfileComplete:getYesNo(t.candidate.isMinProfileComplete),experience:getExperience(t.candidate.candidateExpList),candidateId:t.candidate.candidateId,preScreenAttempt:d,jobApplicationMode:l,preScreenSelectionTS:o,varColumn:c})}),e.tableContainer.show();var n;n="match_view"==e.currentView&&{style:"multi"},e.table=$("table#"+e.tableContainerId).DataTable({data:a,order:[[22,"desc"]],scrollX:!0,rowId:"candidateId",columns:[{data:"cLID"},{data:"candidateFirstName"},{data:"candidateMobile"},{data:"candidateJobPref"},{data:"candidateLocalityPref"},{data:"locality"},{data:"matchedLocality"},{data:"age"},{data:"candidateExperience"},{data:"candidateIsEmployed"},{data:"candidateLastWithdrawnSalary"},{data:"candidateLanguage"},{data:"candidateEducation"},{data:"candidateSkillList"},{data:"candidateGender"},{data:"pastOrCurrentCompanyName"},{data:"candidateIsAssessmentComplete"},{data:"jobAppliedOn"},{data:"noOfJobApplication"},{data:"candidateExperienceLetter"},{data:"candidateIdProofs"},{data:"candidateTimeShiftPref"},{data:"lastActive"},{data:"candidateCreateTimestamp"},{data:"isMinProfileComplete"},{data:"experience"},{data:"candidateId"},{data:"preScreenAttempt"},{data:"jobApplicationMode"},{data:"preScreenSelectionTS"},{data:"varColumn"}],deferRender:!0,scroller:!0,scrollY:"48vh",scrollCollapse:!0,language:{emptyTable:"No data available"},destroy:!0,dom:"Bfrtip",buttons:["copy","csv","excel"],select:n}),e.table.columns().every(function(){var e=this;$("input",this.footer()).on("keyup change",function(){e.search()!==this.value&&e.search(this.value).draw()})}),NProgress.done()}catch(i){void 0}},e.addFooter=function(){shouldAddFooter&&($("#"+e.tableContainerId+" tfoot th").each(function(){var e=$(this).text();$(this).html('<input type="text" name="'+e+'"  id="'+e+'" placeholder="'+e+'" />')}),shouldAddFooter=!1)},e.getSelectionFromTable=function(){if(null==e.jpSelectedCandidateList||null==e.table)return void e.notify("No Candidates found !","danger");var t=e.table.rows({selected:!0}).ids(),a=t.length;e.jpSelectedCandidateList=[];for(var n=0;n<a;n++)e.jpSelectedCandidateList.push(parseInt(t[n]));void 0},e.submitForm=function(){e.formSubmit.submit(function(t){t.preventDefault(),e.fetchCandidateList()})},e.submitSelectedCandidateList=function(){NProgress.start();var t={jobPostId:e.jpId,selectedCandidateIdList:e.jpSelectedCandidateList};try{$.ajax({type:"POST",url:e.urlSaveSelectedCandidate,contentType:"application/json; charset=utf-8",data:JSON.stringify(t),success:e.responseInterpreter})}catch(a){void 0}},e.responseInterpreter=function(t){void 0,"SUCCESS"==t.status?(e.currentView=t.nextView,e.notify(t.message+" Please wait, Refreshing Page","success"),setTimeout(function(){window.location=t.redirectUrl+e.jpId+"/?view="+t.nextView},3e3)):e.notify(t.message,"danger")},e.initPreScreenView=function(){NProgress.start();try{$.ajax({type:"POST",url:"/support/api/getSelectedCandidate/"+e.jpId,data:!1,contentType:!1,processData:!1,success:e.updatePreScreenTable})}catch(t){void 0}},e.updatePreScreenTable=function(t){e.jpSelectedCandidateList=[],$.each(t,function(t,a){null!=a&&e.jpSelectedCandidateList.push(a)}),e.notify("Total Candidate Selected : "+e.jpSelectedCandidateList.length,"warning"),e.renderTable(e.jpSelectedCandidateList)},e.getSupportAgent=function(){try{$.ajax({type:"GET",url:"/getSupportAgent",data:!1,async:!1,contentType:!1,processData:!1,success:e.processSupportAgentData})}catch(t){void 0}},e.populateJobPostCardUI=function(t){NProgress.start();var a=t.jobPostTitle,n=t.company.companyName,i="Rs. "+t.jobPostMinSalary;0!=t.jobPostMaxSalary&&(i+=" - Rs. "+t.jobPostMaxSalary),e.renderJobCard(a,n,i)},e.renderJobCard=function(e,t,a){$("#job_post_title").text(e),$("#job_post_company_title").text(t),$("#job_post_salary").text(a)},e.processSupportAgentData=function(e){var t=e.agentMobileNumber;null!=t&&(globalRecAgentNumber=t)},e.destroyLists=function(){e.jpCandidateList=[],e.jpSelectedCandidateList=[]},e.destroyLists(),e.setJPId(),e.setCurrentView(),"match_view"==e.currentView?($("#header_view_title").text("Match View"),$(".navigation__link").removeClass("mdl-navigation__link--current"),$("#match_view_drawer").removeClass("mdl-navigation__link--current").addClass("mdl-navigation__link--current"),e.init(),e.initParams(),e.submitForm(),document.getElementById("moveSelectedBtn").addEventListener("click",function(){e.getSelectionFromTable(),e.jpSelectedCandidateList.length>0?e.submitSelectedCandidateList():e.notify("Please select candidate(s) to move to pre-screen","danger")})):"pre_screen_view"==e.currentView?($("#header_view_title").text("Pre Screen View"),$(".navigation__link").removeClass("mdl-navigation__link--current"),$("#pre_screen_view_drawer").removeClass("mdl-navigation__link--current").addClass("mdl-navigation__link--current"),e.initPreScreenView(),e.initJobCard()):$("#header_view_title").text("Future View")});